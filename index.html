<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ITICS ‚Äì Indxx Thematic Industry Classification System</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js" crossorigin="anonymous"></script>
<style>
:root{
  --bg:#07080a;--s1:#0e1014;--s2:#13151a;--s3:#1a1d24;--b1:#232730;--b2:#2d3140;
  --w:#fff;--g1:#9ba3b5;--g2:#5c6478;--g3:#363c4e;
  --acc:#e8192c;--pur:#7c3aed;--cyn:#0891b2;--grn:#059669;--amb:#d97706;
  --pur-l:rgba(124,58,237,.15);--cyn-l:rgba(8,145,178,.12);--grn-l:rgba(5,150,105,.12);--acc-l:rgba(232,25,44,.1);
  --grad:linear-gradient(135deg,#7c3aed,#0891b2);
  --grad-l:linear-gradient(135deg,rgba(124,58,237,.18),rgba(8,145,178,.12));
  --r4:4px;--r6:6px;--r8:8px;--r12:12px;--r16:16px;--r24:24px;
}
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;font-family:'Inter',sans-serif;background:var(--bg);color:var(--w);overflow:hidden;}
button,input,select{font-family:inherit;}
::-webkit-scrollbar{width:4px;height:4px;}
::-webkit-scrollbar-track{background:var(--s1);}
::-webkit-scrollbar-thumb{background:var(--b1);border-radius:2px;}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
.hdr{position:fixed;top:0;left:0;right:0;height:56px;background:rgba(7,8,10,.97);backdrop-filter:blur(16px);border-bottom:1px solid var(--b1);z-index:800;display:flex;align-items:center;justify-content:space-between;padding:0 32px;}
.logo{display:flex;flex-direction:column;cursor:pointer;user-select:none;}
.logo-mark{font-size:1.25rem;font-weight:800;letter-spacing:-1.5px;line-height:1;}
.logo-mark em{color:var(--acc);font-style:normal;}
.logo-tag{font-size:.44rem;color:var(--cyn);letter-spacing:1.2px;text-transform:uppercase;}
.hdr-nav{display:flex;align-items:center;gap:18px;}
.hdr-nav a{color:var(--g2);text-decoration:none;font-size:.76rem;transition:color .2s;}
.hdr-nav a:hover{color:var(--w);}
.hdr-trial{display:none;align-items:center;gap:7px;padding:3px 9px;background:var(--grn-l);border:1px solid rgba(5,150,105,.3);border-radius:var(--r24);}
.hdr-trial.on{display:flex;}
.trial-dot{width:6px;height:6px;background:var(--grn);border-radius:50%;animation:pulse 2s infinite;}
@keyframes pulse{0%,100%{opacity:1;}50%{opacity:.4;}}
.trial-txt{font-size:.66rem;font-weight:600;color:var(--grn);}
.trial-bar-wrap{width:44px;height:3px;background:rgba(255,255,255,.08);border-radius:2px;overflow:hidden;}
.trial-bar{height:100%;background:var(--grn);border-radius:2px;}
.trial-days-txt{font-size:.63rem;color:var(--g2);}
.hdr-user{display:none;align-items:center;gap:7px;}
.hdr-user.on{display:flex;}
.hdr-avatar{width:26px;height:26px;background:var(--grad);border-radius:var(--r6);display:flex;align-items:center;justify-content:center;font-size:.62rem;font-weight:700;}
.hdr-uname{font-size:.76rem;font-weight:500;}
.hdr-logout{padding:3px 9px;background:transparent;border:1px solid var(--b1);border-radius:var(--r6);color:var(--g2);font-size:.68rem;cursor:pointer;transition:all .2s;}
.hdr-logout:hover{border-color:var(--acc);color:var(--acc);}
.hdr-cta{padding:5px 13px;background:var(--grad);border:none;border-radius:var(--r6);color:var(--w);font-size:.73rem;font-weight:600;cursor:pointer;transition:opacity .2s;}
.hdr-cta:hover{opacity:.85;}

/* ‚îÄ‚îÄ PAGES ‚îÄ‚îÄ */
.pg{display:none;height:calc(100vh - 56px);margin-top:56px;overflow:hidden;}
.pg.on{display:flex;flex-direction:column;}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê AUTH PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.auth-layout{display:grid;grid-template-columns:1fr 480px;height:100%;overflow:hidden;}
.auth-hero{display:flex;flex-direction:column;justify-content:center;padding:48px 56px;position:relative;overflow-y:auto;background:linear-gradient(135deg,rgba(124,58,237,.06) 0%,transparent 50%,rgba(8,145,178,.04) 100%);}
.auth-hero::before{content:'';position:absolute;top:-80px;left:20%;width:500px;height:500px;background:radial-gradient(circle,rgba(124,58,237,.12) 0%,transparent 70%);pointer-events:none;}
.auth-hero::after{content:'';position:absolute;bottom:-60px;right:10%;width:360px;height:360px;background:radial-gradient(circle,rgba(8,145,178,.09) 0%,transparent 70%);pointer-events:none;}
.auth-eyebrow{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;background:var(--pur-l);border:1px solid rgba(124,58,237,.3);border-radius:var(--r24);font-size:.7rem;color:#a78bfa;font-weight:600;margin-bottom:18px;width:fit-content;}
.auth-h1{font-size:3rem;font-weight:800;line-height:1.08;margin-bottom:14px;letter-spacing:-2px;}
.auth-h1 span{background:linear-gradient(90deg,var(--acc),var(--pur));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.auth-sub{font-size:.9rem;color:var(--g1);line-height:1.7;margin-bottom:22px;max-width:520px;}
.auth-stats{display:flex;gap:36px;margin-bottom:22px;flex-wrap:wrap;}
.astat-n{font-size:1.8rem;font-weight:800;line-height:1;}
.astat-l{font-size:.65rem;color:var(--g2);margin-top:3px;text-transform:uppercase;letter-spacing:.5px;}
.auth-btns{display:flex;gap:10px;margin-bottom:24px;}
.btn-white{padding:11px 26px;background:var(--w);color:var(--bg);border:none;border-radius:var(--r8);font-size:.88rem;font-weight:700;cursor:pointer;transition:opacity .2s;}
.btn-white:hover{opacity:.88;}
.btn-outline{padding:11px 26px;background:transparent;color:var(--w);border:1.5px solid rgba(255,255,255,.25);border-radius:var(--r8);font-size:.88rem;font-weight:600;cursor:pointer;transition:all .2s;}
.btn-outline:hover{border-color:var(--w);}
.auth-bottom-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;max-width:700px;}
.uc-strip{background:rgba(255,255,255,.03);border:1px solid var(--b1);border-radius:var(--r12);padding:14px 16px;}
.uc-strip-hd{font-size:.6rem;font-weight:700;text-transform:uppercase;letter-spacing:.8px;color:var(--g2);margin-bottom:10px;}
.uc-cards{display:flex;flex-direction:column;gap:6px;}
.uc-card{display:flex;align-items:flex-start;gap:10px;padding:8px 10px;background:var(--s2);border-radius:var(--r8);border-left:2px solid var(--pur);transition:border-color .3s;}
.uc-card.active{border-left-color:var(--acc);}
.uc-icon{font-size:1rem;flex-shrink:0;margin-top:1px;}
.uc-text strong{display:block;font-size:.74rem;font-weight:600;margin-bottom:2px;}
.uc-text p{font-size:.65rem;color:var(--g2);line-height:1.5;}
.live-ex{background:rgba(255,255,255,.03);border:1px solid var(--b1);border-radius:var(--r12);padding:14px 16px;display:flex;flex-direction:column;}
.live-ex-hd{font-size:.58rem;font-weight:700;text-transform:uppercase;letter-spacing:.8px;color:var(--g2);margin-bottom:8px;}
.live-co-row{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:8px;}
.live-co-name{font-size:.84rem;font-weight:700;line-height:1.2;}
.live-co-meta{font-size:.58rem;color:var(--g2);font-family:monospace;margin-top:2px;}
.live-segs{display:flex;flex-direction:column;gap:5px;flex:1;}
.live-seg-label{font-size:.54rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--g2);margin-bottom:4px;}
.live-l1-block{background:var(--s2);border-radius:var(--r6);border-left:2px solid var(--pur);overflow:hidden;}
.live-l1-hd{display:flex;align-items:center;gap:6px;padding:5px 8px;background:rgba(124,58,237,.06);}
.live-l1-badge{padding:2px 6px;background:var(--pur-l);border:1px solid rgba(124,58,237,.25);border-radius:2px;font-size:.54rem;color:#a78bfa;font-weight:700;font-family:monospace;}
.live-l1-name{font-size:.7rem;font-weight:600;}
.live-l2-row{display:flex;align-items:center;gap:6px;padding:5px 8px;border-top:1px solid rgba(255,255,255,.04);}
.live-l2-badge{padding:1px 5px;background:var(--cyn-l);border:1px solid rgba(8,145,178,.2);border-radius:2px;font-size:.52rem;color:var(--cyn);font-weight:700;font-family:monospace;flex-shrink:0;}
.live-l2-name{font-size:.66rem;color:var(--g1);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.live-bar-wrap{width:52px;height:4px;background:var(--b1);border-radius:2px;overflow:hidden;flex-shrink:0;}
.live-pct{font-size:.68rem;font-weight:700;min-width:36px;text-align:right;flex-shrink:0;}
.live-footer{margin-top:8px;padding-top:8px;border-top:1px solid var(--b1);font-size:.6rem;color:var(--g2);text-align:center;}
.auth-panel{background:rgba(14,16,20,.97);border-left:1px solid var(--b1);display:flex;flex-direction:column;justify-content:center;padding:40px 44px;position:relative;overflow-y:auto;}
.auth-panel::before{content:'';position:absolute;top:-100px;right:-80px;width:300px;height:300px;background:radial-gradient(circle,rgba(124,58,237,.1) 0%,transparent 70%);pointer-events:none;}
.auth-panel-logo{display:flex;flex-direction:column;margin-bottom:28px;}
.auth-panel-logo .lm{font-size:1.6rem;font-weight:800;letter-spacing:-2px;line-height:1;}
.auth-panel-logo .lm em{color:var(--acc);font-style:normal;}
.auth-panel-logo .lt{font-size:.5rem;color:var(--cyn);letter-spacing:1.5px;text-transform:uppercase;margin-top:1px;}
.abox{width:100%;}
.abox-tabs{display:flex;background:var(--s2);border:1px solid var(--b1);border-radius:var(--r8);padding:3px;gap:3px;margin-bottom:22px;}
.abox-tab{flex:1;padding:8px;background:transparent;border:none;color:var(--g2);font-size:.78rem;font-weight:500;cursor:pointer;border-radius:var(--r6);transition:all .2s;}
.abox-tab.on{background:var(--grad);color:var(--w);font-weight:700;}
.abox-h{font-size:1.3rem;font-weight:800;margin-bottom:4px;letter-spacing:-.5px;}
.abox-sub{font-size:.75rem;color:var(--g2);margin-bottom:20px;line-height:1.5;}
.fld{margin-bottom:14px;}
.fld label{display:block;font-size:.72rem;color:var(--g1);margin-bottom:5px;font-weight:600;letter-spacing:.2px;}
.fld input{width:100%;padding:11px 14px;background:var(--s2);border:1px solid var(--b1);border-radius:var(--r8);color:var(--w);font-size:.88rem;transition:border-color .2s;}
.fld input:focus{outline:none;border-color:var(--pur);box-shadow:0 0 0 3px rgba(124,58,237,.12);}
.frow{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.abtn{width:100%;padding:13px;background:var(--grad);border:none;border-radius:var(--r8);color:var(--w);font-size:.92rem;font-weight:700;cursor:pointer;margin-top:6px;transition:opacity .2s;letter-spacing:.2px;}
.abtn:hover{opacity:.88;}
.asw{text-align:center;margin-top:14px;font-size:.74rem;color:var(--g2);}
.asw a{color:var(--cyn);cursor:pointer;text-decoration:none;font-weight:500;}
.ahelp{margin-top:16px;padding-top:14px;border-top:1px solid var(--b1);font-size:.68rem;color:var(--g3);line-height:1.7;}
.ahelp a{color:var(--g2);text-decoration:none;}

/* ‚îÄ‚îÄ SAMPLE ‚îÄ‚îÄ */
.sample-banner{background:var(--grad-l);border-bottom:1px solid rgba(124,58,237,.2);padding:12px 24px;display:flex;align-items:center;justify-content:space-between;gap:16px;flex-shrink:0;}
.sb-info h2{font-size:.86rem;font-weight:700;margin-bottom:2px;}
.sb-info p{font-size:.7rem;color:var(--g1);}
.sb-info p strong{color:var(--cyn);}
.sb-cta{display:flex;gap:7px;flex-shrink:0;}
.btn-grad{padding:7px 16px;background:var(--grad);border:none;border-radius:var(--r8);color:var(--w);font-size:.77rem;font-weight:700;cursor:pointer;transition:opacity .2s;white-space:nowrap;}
.btn-grad:hover{opacity:.88;}
.sample-body{flex:1;overflow:auto;padding:16px 24px;}
.sec-label{font-size:.62rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--g2);margin-bottom:8px;display:flex;align-items:center;gap:8px;}
.sec-label::after{content:'';flex:1;height:1px;background:var(--b1);}

/* ‚îÄ‚îÄ TABLE ‚îÄ‚îÄ */
.tbl-wrap{overflow:auto;border:1px solid var(--b1);border-radius:var(--r12);}
.tbl-wrap table{width:100%;border-collapse:collapse;min-width:900px;}
.tbl-wrap thead{background:var(--s2);position:sticky;top:0;z-index:5;}
.tbl-wrap th{padding:7px 11px;text-align:left;font-size:.58rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--g2);border-bottom:1px solid var(--b1);white-space:nowrap;}
.pr{cursor:pointer;border-bottom:1px solid var(--b1);transition:background .12s;}
.pr:hover td{background:rgba(124,58,237,.04);}
.pr.exp td{background:rgba(124,58,237,.05);}
.pr td{padding:8px 11px;font-size:.78rem;vertical-align:middle;}
.sr{display:none;border-bottom:1px dashed var(--s3);}
.sr.on{display:table-row;}
.sr td{padding:0;font-size:.72rem;background:#090b0e;vertical-align:top;}
.earr{width:16px;height:16px;background:var(--s3);border-radius:3px;display:inline-flex;align-items:center;justify-content:center;font-size:.52rem;color:var(--g2);transition:transform .2s;flex-shrink:0;}
.exp .earr{transform:rotate(90deg);}
.co-strong{font-weight:600;font-size:.8rem;display:block;}
.co-id{font-size:.58rem;color:var(--g3);font-family:monospace;}
.co-isin{font-size:.63rem;color:var(--g2);font-family:monospace;}
.seg-badge{display:inline-flex;padding:1px 5px;border-radius:8px;font-size:.58rem;background:linear-gradient(135deg,rgba(124,58,237,.2),rgba(8,145,178,.15));color:var(--cyn);font-weight:600;margin-left:4px;}
.l0-chip{display:inline-block;padding:2px 6px;background:rgba(124,58,237,.12);border:1px solid rgba(124,58,237,.25);border-radius:var(--r4);font-size:.62rem;color:#a78bfa;font-weight:600;}
.rc{display:inline-block;padding:2px 6px;border-radius:3px;font-size:.6rem;font-weight:700;}
.rc-p{background:var(--grn-l);border:1px solid rgba(5,150,105,.3);color:var(--grn);}
.rc-q{background:rgba(217,119,6,.1);border:1px solid rgba(217,119,6,.25);color:var(--amb);}
.rc-m{background:var(--acc-l);border:1px solid rgba(232,25,44,.2);color:#f87171;}
.locked{color:var(--b2);user-select:none;font-size:.7rem;}
.ghost-wrap{position:relative;margin-top:4px;}
.ghost-rows{pointer-events:none;filter:blur(4px);opacity:.2;}
.ghost-row{display:flex;padding:9px 11px;border-bottom:1px solid var(--b1);gap:10px;}
.gc{height:9px;background:var(--s3);border-radius:2px;}
.ghost-cta{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:9px;background:linear-gradient(to bottom,transparent,rgba(7,8,10,.75));}
.ghost-cta p{font-size:.82rem;color:var(--g1);}
.vbtn{padding:3px 8px;background:transparent;border:1px solid var(--b1);border-radius:3px;color:var(--g2);font-size:.62rem;cursor:pointer;transition:all .2s;white-space:nowrap;}
.vbtn:hover{border-color:var(--cyn);color:var(--cyn);}
.cb{width:13px;height:13px;accent-color:var(--pur);cursor:pointer;flex-shrink:0;}
.seg-expand-row{display:none;}
.seg-expand-row.on{display:table-row;}
.seg-expand-cell{padding:0 !important;background:#07090c !important;}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   INLINE SEGMENT EXPAND ‚Äî IMPROVED
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.exp-wrap-outer{background:#07090c;border-top:2px solid rgba(124,58,237,.25);}
.exp-meta-row{display:flex;align-items:center;gap:8px;padding:6px 12px;background:var(--s2);border-bottom:1px solid var(--b1);font-size:.6rem;}
.exp-meta-row .col-hd{font-size:.58rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--g2);white-space:nowrap;}
.exp-l1-group{display:flex;align-items:stretch;border-bottom:1px solid rgba(255,255,255,.05);}
.exp-l1-group:last-child{border-bottom:none;}
.exp-l1-label{width:190px;flex-shrink:0;padding:10px 12px 10px 16px;border-right:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.018);display:flex;flex-direction:column;justify-content:center;gap:4px;}
.exp-l1-code{display:inline-flex;padding:2px 7px;background:rgba(124,58,237,.14);border:1px solid rgba(124,58,237,.22);border-radius:2px;font-size:.62rem;color:#a78bfa;font-weight:700;font-family:monospace;width:fit-content;margin-bottom:2px;}
.exp-l1-name{font-size:.82rem;font-weight:700;color:var(--w);line-height:1.3;}
.exp-l1-sub{font-size:.64rem;color:var(--g2);}
.exp-l2-rows{flex:1;display:flex;flex-direction:column;}
.exp-l2-row{display:flex;align-items:center;min-height:40px;padding:8px 14px 8px 12px;border-bottom:1px solid rgba(255,255,255,.04);}
.exp-l2-row:last-child{border-bottom:none;}
.exp-l2-name{flex:1;font-size:.82rem;font-weight:500;color:var(--g1);padding-right:12px;line-height:1.35;}
.exp-l2-code-cell{width:60px;flex-shrink:0;text-align:center;}
.exp-l2-code-badge{padding:2px 5px;background:var(--cyn-l);border:1px solid rgba(8,145,178,.2);border-radius:2px;font-size:.62rem;color:var(--cyn);font-weight:700;font-family:monospace;}
.exp-l2-rev{width:62px;flex-shrink:0;text-align:right;font-size:.92rem;font-weight:800;padding-right:10px;}
.exp-l2-bar-cell{width:160px;flex-shrink:0;padding:0 10px;}
.exp-l2-bar-track{height:8px;background:var(--b1);border-radius:4px;overflow:hidden;}
.exp-l2-bar-fill{height:100%;border-radius:4px;}
.exp-l2-cls{width:90px;flex-shrink:0;text-align:center;}
.exp-l2-cls .rc{font-size:.66rem;padding:3px 8px;}

/* ‚îÄ‚îÄ SCREENER / DASHBOARD ‚îÄ‚îÄ */
.main-pg{display:none;height:calc(100vh - 56px);margin-top:56px;flex-direction:column;}
.main-pg.on{display:flex;}
.pg-hdr{padding:8px 24px;border-bottom:1px solid var(--b1);background:var(--bg);display:flex;align-items:center;justify-content:space-between;flex-shrink:0;gap:12px;}
.pg-hdr-l h1{font-size:.88rem;font-weight:700;}
.pg-hdr-l p{font-size:.66rem;color:var(--g2);}

/* DROPDOWN YEAR SELECTOR */
.yr-select-wrap{position:relative;display:inline-flex;align-items:center;}
.yr-select{appearance:none;-webkit-appearance:none;padding:5px 28px 5px 10px;background:var(--s2);border:1px solid var(--b1);border-radius:var(--r6);color:var(--w);font-size:.72rem;font-weight:600;cursor:pointer;outline:none;transition:border-color .15s;}
.yr-select:focus,.yr-select:hover{border-color:var(--pur);}
.yr-select-wrap::after{content:'‚ñæ';position:absolute;right:8px;top:50%;transform:translateY(-50%);font-size:.65rem;color:var(--g2);pointer-events:none;}

.main-body{flex:1;display:flex;overflow:hidden;}

/* COLLAPSIBLE FILTER PANEL */
.fp{background:var(--s1);border-right:1px solid var(--b1);display:flex;flex-direction:column;flex-shrink:0;transition:width .25s ease;overflow:hidden;}
.fp.open{width:250px;}
.fp.closed{width:36px;}
.fp-toggle-btn{width:100%;padding:8px 0;background:transparent;border:none;border-bottom:1px solid var(--b1);color:var(--g1);font-size:.9rem;cursor:pointer;transition:background .15s;flex-shrink:0;display:flex;align-items:center;justify-content:center;gap:5px;}
.fp-toggle-btn:hover{background:rgba(255,255,255,.04);}
.fp-toggle-btn .fp-toggle-label{font-size:.62rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap;overflow:hidden;}
.fp.closed .fp-toggle-label{display:none;}
.fp-inner{flex:1;display:flex;flex-direction:column;overflow:hidden;}
.fp.closed .fp-inner{display:none;}
.fp-body{flex:1;overflow-y:auto;padding:8px 0;}
.fp-sec{border-bottom:1px solid rgba(255,255,255,.04);}
.fp-sec-hd{display:flex;align-items:center;justify-content:space-between;padding:8px 11px;cursor:pointer;user-select:none;transition:background .12s;}
.fp-sec-hd:hover{background:rgba(255,255,255,.02);}
.fp-sec-hd-l{display:flex;align-items:center;gap:6px;}
.fp-sec-step{width:16px;height:16px;background:var(--grad);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.52rem;font-weight:700;flex-shrink:0;}
.fp-sec-title{font-size:.63rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--g1);}
.fp-sec-count{padding:1px 5px;background:var(--pur-l);border-radius:var(--r24);font-size:.55rem;color:#a78bfa;font-weight:700;}
.fp-sec-count.none{background:transparent;color:var(--g3);}
.fp-chevron{font-size:.55rem;color:var(--g2);transition:transform .2s;}
.fp-chevron.open{transform:rotate(90deg);}
.fp-sec-body{display:none;padding:5px 11px 9px;}
.fp-sec-body.open{display:block;}
.fp-sec-hint{font-size:.58rem;color:var(--g3);margin-bottom:5px;line-height:1.5;}
.pill-grid{display:flex;flex-wrap:wrap;gap:3px;}
.lvl-pill{padding:3px 8px;background:var(--s2);border:1px solid var(--b1);border-radius:var(--r24);font-size:.64rem;cursor:pointer;color:var(--g1);transition:all .12s;white-space:nowrap;}
.lvl-pill:hover{border-color:var(--g2);}
.lvl-pill.on-l0{background:rgba(124,58,237,.15);border-color:var(--pur);color:#a78bfa;font-weight:600;}
.lvl-pill.on-l1{background:var(--cyn-l);border-color:var(--cyn);color:var(--cyn);font-weight:600;}
.lvl-pill.on-l2{background:var(--grn-l);border-color:var(--grn);color:var(--grn);font-weight:600;}
.range-row{display:flex;align-items:center;gap:4px;margin-bottom:3px;}
.range-row label{font-size:.62rem;color:var(--g2);width:22px;flex-shrink:0;}
.range-row input{flex:1;padding:4px 7px;background:var(--s2);border:1px solid var(--b1);border-radius:var(--r6);color:var(--w);font-size:.72rem;}
.range-row input:focus{outline:none;border-color:var(--pur);}
.rc-chips{display:flex;gap:3px;flex-wrap:wrap;}
.rc-chip{padding:3px 8px;background:var(--s2);border:1px solid var(--b1);border-radius:var(--r24);font-size:.64rem;cursor:pointer;color:var(--g2);transition:all .12s;}
.rc-chip.on-p{background:var(--grn-l);border-color:var(--grn);color:var(--grn);}
.rc-chip.on-q{background:rgba(217,119,6,.1);border-color:var(--amb);color:var(--amb);}
.rc-chip.on-m{background:var(--acc-l);border-color:var(--acc);color:var(--acc);}
.fp-footer{padding:7px 11px;border-top:1px solid var(--b1);display:flex;gap:5px;flex-shrink:0;}
.fp-apply{flex:1;padding:7px;background:var(--grad);border:none;border-radius:var(--r6);color:var(--w);font-size:.73rem;font-weight:700;cursor:pointer;}
.fp-apply:hover{opacity:.88;}
.fp-clear{padding:7px 9px;background:transparent;border:1px solid var(--b1);border-radius:var(--r6);color:var(--g2);font-size:.7rem;cursor:pointer;}
.fp-clear:hover{border-color:var(--acc);color:var(--acc);}
.mid{flex:1;display:flex;flex-direction:column;overflow:hidden;}
.rbar{padding:7px 14px;border-bottom:1px solid var(--b1);display:flex;align-items:center;justify-content:space-between;flex-shrink:0;gap:7px;}
.rbar .rstat{font-size:.72rem;color:var(--g1);}
.rbar .rstat strong{color:var(--cyn);}
.srch-wrap{position:relative;}
.srch-wrap input{padding:5px 9px 5px 26px;background:var(--s2);border:1px solid var(--b1);border-radius:var(--r6);color:var(--w);font-size:.72rem;width:170px;}
.srch-wrap input:focus{outline:none;border-color:var(--pur);}
.srch-wrap::before{content:'‚åï';position:absolute;left:7px;top:50%;transform:translateY(-50%);font-size:.8rem;color:var(--g2);}
.mid-tbl{flex:1;overflow:auto;}
.sub-footer{padding:8px 14px;border-top:1px solid var(--b1);background:var(--s1);display:flex;align-items:center;justify-content:space-between;flex-shrink:0;gap:10px;}
.sf-left{display:flex;align-items:center;gap:10px;}
.sf-info .sf-sel{font-size:.8rem;font-weight:600;}
.sf-info .sf-sel span{background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.sf-info .sf-segs{font-size:.64rem;color:var(--g2);}
.bundle-badge{padding:2px 7px;background:var(--pur-l);border:1px solid rgba(124,58,237,.3);border-radius:var(--r24);font-size:.62rem;color:#a78bfa;font-weight:600;}
.sf-right{display:flex;align-items:center;gap:9px;flex-shrink:0;}
.sf-price-wrap{text-align:right;}
.sf-price{font-size:1.05rem;font-weight:800;color:var(--cyn);}
.sf-price sub{font-size:.58rem;font-weight:400;color:var(--g2);}
.sf-breakdown{font-size:.58rem;color:var(--g2);}
.sf-btn{padding:7px 16px;background:var(--grad);border:none;border-radius:var(--r8);color:var(--w);font-size:.77rem;font-weight:700;cursor:pointer;white-space:nowrap;}
.sf-btn:hover{opacity:.88;}
.sf-btn:disabled{opacity:.3;cursor:not-allowed;}
.price-badge{display:none;align-items:center;padding:2px 7px;background:rgba(8,145,178,.1);border:1px solid rgba(8,145,178,.2);border-radius:var(--r24);font-size:.62rem;color:var(--cyn);}
.dash-cards{padding:10px 14px;border-bottom:1px solid var(--b1);display:grid;grid-template-columns:repeat(4,1fr);gap:8px;flex-shrink:0;}
.dc{background:var(--s2);border:1px solid var(--b1);border-radius:var(--r8);padding:9px 11px;}
.dc.trial-dc{border-color:rgba(5,150,105,.3);}
.dc h4{font-size:.56rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--g2);margin-bottom:3px;}
.dc .dv{font-size:1.2rem;font-weight:800;}
.dc .ds{font-size:.62rem;color:var(--g2);margin-top:1px;}
.dc-prog{height:2px;background:rgba(255,255,255,.07);border-radius:2px;margin-top:5px;overflow:hidden;}
.dc-prog-fill{height:100%;background:var(--grn);border-radius:2px;}
.dash-ctrl{padding:7px 14px;border-bottom:1px solid var(--b1);display:flex;align-items:center;justify-content:space-between;flex-shrink:0;gap:7px;}
.dash-ctrl-l{display:flex;align-items:center;gap:7px;}
.dash-ctrl-r{display:flex;gap:5px;align-items:center;}
.dash-srch input{padding:5px 9px;background:var(--s2);border:1px solid var(--b1);border-radius:var(--r6);color:var(--w);font-size:.72rem;width:150px;}
.dash-srch input:focus{outline:none;border-color:var(--pur);}
.btn-sm{padding:5px 11px;border-radius:var(--r6);font-size:.7rem;cursor:pointer;font-weight:600;transition:all .15s;}
.btn-sm-ghost{background:var(--s2);border:1px solid var(--b1);color:var(--w);}
.btn-sm-ghost:hover{border-color:var(--g2);}
.btn-sm-grad{background:var(--grad);border:none;color:var(--w);}
.btn-sm-grad:hover{opacity:.88;}
.btn-sm-cyn{background:rgba(8,145,178,.1);border:1px solid rgba(8,145,178,.25);color:var(--cyn);}
.exp-wrap{position:relative;}
.exp-dropdown{display:none;position:absolute;top:110%;right:0;background:var(--s2);border:1px solid var(--b1);border-radius:var(--r8);min-width:200px;z-index:50;box-shadow:0 8px 24px rgba(0,0,0,.5);overflow:hidden;}
.exp-dropdown.on{display:block;}
.exp-group-label{padding:4px 9px;font-size:.56rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--g2);background:var(--s3);}
.exp-item{padding:6px 9px;font-size:.7rem;cursor:pointer;display:flex;align-items:center;gap:6px;transition:background .12s;}
.exp-item:hover{background:var(--s3);}
.ei-badge{padding:1px 4px;border-radius:2px;font-size:.56rem;font-weight:700;}
.sel-sum{width:210px;background:var(--s1);border-left:1px solid var(--b1);overflow-y:auto;flex-shrink:0;}
.ss-hd{padding:9px 11px;border-bottom:1px solid var(--b1);}
.ss-hd h3{font-size:.68rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;}
.ss-hd p{font-size:.6rem;color:var(--g2);margin-top:1px;}
.ss-body{padding:7px 11px;}
.ss-empty{text-align:center;padding:20px 7px;color:var(--g2);font-size:.68rem;}
.ss-empty .ei{font-size:1.3rem;margin-bottom:4px;}
.ss-l0-wrap{margin-bottom:7px;}
.ss-l0-lbl{margin-bottom:3px;}
.ss-l0-tag{padding:2px 6px;background:rgba(124,58,237,.15);border:1px solid rgba(124,58,237,.25);border-radius:3px;font-size:.62rem;color:#a78bfa;font-weight:700;}
.ss-l1-item{margin-left:7px;margin-bottom:2px;}
.ss-l1-name{font-size:.62rem;color:var(--g1);display:flex;align-items:center;gap:3px;}
.ss-l1-name::before{content:'‚îú';font-size:.56rem;color:var(--g2);}
.ss-l2-wrap{margin-left:13px;}
.ss-l2-dot{font-size:.58rem;color:var(--g2);display:flex;align-items:center;gap:2px;}
.ss-l2-dot::before{content:'¬∑';}
.ss-stat-box{margin-top:9px;padding:7px;background:var(--s2);border-radius:var(--r8);text-align:center;}
.ss-stat-box .sn{font-size:1.3rem;font-weight:800;}
.ss-stat-box .sl{font-size:.6rem;color:var(--g2);}
.ss-stat-box .ss2{font-size:.76rem;font-weight:700;color:var(--cyn);margin-top:1px;}

/* ‚îÄ‚îÄ DETAIL MODAL ‚îÄ‚îÄ */
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:900;padding:16px;}
.modal-bg.on{display:flex;}
.modal{background:var(--s1);border:1px solid var(--b1);border-radius:var(--r16);width:100%;max-width:620px;max-height:90vh;overflow-y:auto;box-shadow:0 8px 32px rgba(0,0,0,.6);}
.det-hdr{padding:14px 18px;border-bottom:1px solid var(--b1);display:flex;align-items:flex-start;justify-content:space-between;gap:12px;}
.det-hdr-info{flex:1;min-width:0;}
.det-co-name{font-size:1rem;font-weight:800;margin-bottom:2px;}
.det-co-meta{font-size:.64rem;color:var(--g2);font-family:monospace;}
.mcls{width:22px;height:22px;background:var(--s2);border:none;border-radius:3px;color:var(--g1);font-size:.9rem;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:2px;}
.mcls:hover{background:var(--acc);color:var(--w);}
.det-summary{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;padding:14px 18px;border-bottom:1px solid var(--b1);}
.det-card{background:var(--s2);border-radius:var(--r8);padding:10px 12px;text-align:center;}
.det-card h5{font-size:.56rem;font-weight:700;text-transform:uppercase;letter-spacing:.6px;color:var(--g2);margin-bottom:5px;}
.det-card .dv{font-size:1.1rem;font-weight:800;}
.det-card .ds{font-size:.62rem;color:var(--g2);margin-top:1px;}
.det-locked-body{padding:18px;}
.locked-preview{position:relative;border-radius:var(--r12);overflow:hidden;margin-bottom:14px;}
.locked-preview-inner{filter:blur(5px);opacity:.25;pointer-events:none;background:var(--s2);border-radius:var(--r12);padding:14px;}
.locked-preview-rows{display:flex;flex-direction:column;gap:6px;}
.lpr{display:flex;gap:8px;align-items:center;padding:7px 10px;background:var(--s3);border-radius:var(--r6);}
.lpr-pill{height:16px;border-radius:3px;background:var(--b1);}
.lpr-bar{height:6px;border-radius:3px;background:var(--b2);}
.locked-overlay{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;background:linear-gradient(to bottom,transparent 0%,rgba(14,16,20,.9) 60%);}
.lock-icon{font-size:2rem;}
.lock-msg{font-size:.82rem;font-weight:700;color:var(--w);text-align:center;}
.lock-sub{font-size:.7rem;color:var(--g1);text-align:center;max-width:280px;line-height:1.5;}
.det-sub-btn{padding:9px 22px;background:var(--grad);border:none;border-radius:var(--r8);color:var(--w);font-size:.82rem;font-weight:700;cursor:pointer;}
.det-sub-btn:hover{opacity:.88;}
.det-locked-l0{display:flex;align-items:center;gap:8px;padding:10px 14px;background:rgba(124,58,237,.07);border:1px solid rgba(124,58,237,.2);border-radius:var(--r8);margin-bottom:10px;}
.det-locked-l0 span{font-size:.72rem;color:var(--g1);}
.det-locked-l0 strong{color:var(--w);}
.det-unlocked-body{padding:14px 18px;}
.det-yr-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;}
.det-yr-lbl{font-size:.64rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--g2);}
.det-body-seg-wrap{display:flex;flex-direction:column;gap:6px;}
.det-l1-block{background:var(--s2);border-radius:var(--r8);border-left:3px solid var(--pur);overflow:hidden;}
.det-l1-hd{display:flex;align-items:center;gap:7px;padding:7px 10px;background:rgba(124,58,237,.06);}
.det-l1-badge{padding:2px 6px;background:var(--pur-l);border:1px solid rgba(124,58,237,.3);border-radius:var(--r4);font-size:.56rem;color:#a78bfa;font-weight:700;font-family:monospace;}
.det-l1-name{font-size:.74rem;font-weight:600;}
.det-l2-row{display:grid;grid-template-columns:auto 1fr auto auto auto;align-items:center;gap:8px;padding:6px 10px;border-top:1px solid rgba(255,255,255,.04);}
.det-l2-row:hover{background:rgba(255,255,255,.02);}
.det-l2-badge{padding:2px 5px;background:var(--cyn-l);border:1px solid rgba(8,145,178,.2);border-radius:var(--r4);font-size:.54rem;color:var(--cyn);font-weight:700;font-family:monospace;white-space:nowrap;}
.det-l2-name{font-size:.7rem;color:var(--g1);}
.det-l2-pct{font-size:.8rem;font-weight:700;min-width:44px;text-align:right;white-space:nowrap;}
.det-l2-bar{width:70px;height:5px;background:var(--b1);border-radius:3px;overflow:hidden;}
.det-l2-bar-fill{height:100%;border-radius:3px;}

/* ‚îÄ‚îÄ CHECKOUT MODAL ‚îÄ‚îÄ */
.co-modal{max-width:520px;}
.modal-hd{padding:13px 17px;border-bottom:1px solid var(--b1);display:flex;align-items:flex-start;justify-content:space-between;}
.modal-hd h3{font-size:.88rem;font-weight:700;}
.modal-hd p{font-size:.66rem;color:var(--g2);margin-top:1px;}
.modal-body{padding:17px;}
.stepper{display:flex;align-items:center;gap:4px;margin-bottom:14px;}
.step-item{display:flex;align-items:center;gap:4px;font-size:.66rem;color:var(--g2);}
.step-item.active{color:var(--w);font-weight:600;}
.step-n{width:17px;height:17px;border-radius:50%;background:var(--s3);display:flex;align-items:center;justify-content:center;font-size:.56rem;font-weight:700;}
.step-sep{flex:1;height:1px;background:var(--b1);}
.msec{margin-bottom:13px;}
.msec-title{font-size:.6rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--g2);margin-bottom:5px;}
.trial-note-box{display:flex;align-items:center;gap:6px;padding:6px 9px;background:var(--grn-l);border:1px solid rgba(5,150,105,.25);border-radius:var(--r8);margin-bottom:9px;}
.trial-note-box span{font-size:.72rem;color:var(--grn);font-weight:500;}
.order-list{background:var(--s2);border-radius:var(--r8);padding:7px;max-height:130px;overflow-y:auto;}
.order-row{display:flex;justify-content:space-between;align-items:center;padding:3px 0;border-bottom:1px solid var(--b1);font-size:.72rem;}
.order-row:last-child{border-bottom:none;}
.order-row .on{font-weight:600;}
.order-row .om{font-size:.6rem;color:var(--g2);}
.order-total{display:flex;justify-content:space-between;align-items:center;margin-top:7px;padding:7px 9px;background:rgba(124,58,237,.06);border:1px solid rgba(124,58,237,.18);border-radius:var(--r8);}
.order-total span{font-size:.7rem;color:var(--g1);}
.order-total strong{font-size:.92rem;color:var(--cyn);}
.plan-grid-2{display:grid;grid-template-columns:1fr 1fr;gap:6px;}
.plan-card{padding:9px;border:1.5px solid var(--b1);border-radius:var(--r8);cursor:pointer;transition:all .15s;position:relative;}
.plan-card:hover{border-color:var(--g2);}
.plan-card.on{border-color:var(--pur);background:var(--pur-l);}
.plan-card.recommended::after{content:'BEST';position:absolute;top:-6px;right:6px;padding:2px 4px;background:var(--grn);border-radius:2px;font-size:.5rem;font-weight:700;}
.plan-card h4{font-size:.72rem;font-weight:700;margin-bottom:1px;}
.plan-card p{font-size:.6rem;color:var(--g2);}
.plan-card .pp{font-size:.88rem;font-weight:800;color:var(--cyn);margin-top:3px;}
.plan-note{font-size:.58rem;color:var(--amb);margin-top:1px;}
.reg-tbl{width:100%;border-collapse:collapse;margin-top:4px;}
.reg-tbl th{padding:3px 6px;text-align:left;font-size:.56rem;font-weight:700;text-transform:uppercase;color:var(--g2);background:var(--s2);border-bottom:1px solid var(--b1);}
.reg-tbl td{padding:3px 6px;font-size:.68rem;border-bottom:1px solid var(--b1);}
.reg-tbl tr:last-child td{border-bottom:none;}
.card-vis{background:linear-gradient(135deg,#0f1324,#1a1e38);border:1px solid rgba(124,58,237,.3);border-radius:var(--r12);padding:13px 15px;margin-bottom:9px;position:relative;overflow:hidden;}
.card-vis::before{content:'';position:absolute;top:-25px;right:-25px;width:80px;height:80px;background:radial-gradient(circle,rgba(124,58,237,.2),transparent 70%);}
.cv-chip{width:22px;height:15px;background:linear-gradient(135deg,#c8a84b,#f0c040);border-radius:3px;margin-bottom:7px;}
.cv-num{font-size:.86rem;letter-spacing:3px;font-family:monospace;font-weight:600;margin-bottom:7px;}
.cv-bot{display:flex;justify-content:space-between;font-size:.6rem;color:rgba(255,255,255,.4);}
.cv-bot span{display:flex;flex-direction:column;gap:1px;}
.cv-bot strong{color:var(--w);font-size:.66rem;}
.cv-logo{position:absolute;top:11px;right:13px;font-size:.76rem;color:rgba(255,255,255,.4);}
.modal-nav{display:flex;gap:6px;margin-top:11px;}
.btn-next{flex:1;padding:9px;background:var(--grad);border:none;border-radius:var(--r8);color:var(--w);font-size:.82rem;font-weight:700;cursor:pointer;}
.btn-next:hover{opacity:.88;}
.btn-back{padding:9px 14px;background:transparent;border:1px solid var(--b1);border-radius:var(--r8);color:var(--g1);font-size:.78rem;cursor:pointer;}
.secure-line{text-align:center;font-size:.62rem;color:var(--g2);margin-top:6px;}
.success-body{text-align:center;padding:24px 14px;}
.sico{font-size:2.2rem;margin-bottom:9px;}
.success-body h2{font-size:1.05rem;font-weight:800;margin-bottom:4px;}
.success-body p{font-size:.76rem;color:var(--g1);line-height:1.7;margin-bottom:12px;}
.spills{display:flex;flex-wrap:wrap;gap:3px;justify-content:center;margin-bottom:14px;}
.spill{padding:2px 8px;background:var(--grn-l);border:1px solid rgba(5,150,105,.3);border-radius:var(--r24);font-size:.64rem;color:var(--grn);}
.btn-dash{padding:9px 22px;background:var(--grad);border:none;border-radius:var(--r8);color:var(--w);font-size:.82rem;font-weight:700;cursor:pointer;}
.info-box{padding:7px 9px;background:rgba(8,145,178,.07);border:1px solid rgba(8,145,178,.18);border-radius:var(--r8);font-size:.7rem;color:var(--g1);line-height:1.6;margin-bottom:7px;}
.info-box strong{color:var(--cyn);}
.warn-box{padding:7px 9px;background:rgba(217,119,6,.07);border:1px solid rgba(217,119,6,.18);border-radius:var(--r8);font-size:.7rem;color:var(--g1);line-height:1.6;margin-bottom:7px;}
.warn-box strong{color:var(--amb);}
.manage-tab-bar{display:flex;background:var(--s2);border-radius:var(--r8);padding:2px;gap:2px;margin-bottom:12px;}
.manage-tab{flex:1;padding:5px;background:transparent;border:none;color:var(--g2);font-size:.72rem;cursor:pointer;border-radius:var(--r6);transition:all .15s;}
.manage-tab.on{background:var(--grad);color:var(--w);font-weight:600;}
.contact-grid{display:grid;grid-template-columns:1fr 1fr;gap:7px;margin-top:5px;}
.cg-item{background:var(--s2);border-radius:var(--r8);padding:10px;text-align:center;}
.cg-item .ci-icon{font-size:1.1rem;margin-bottom:4px;}
.cg-item h5{font-size:.7rem;font-weight:700;margin-bottom:2px;}
.cg-item a,.cg-item p{font-size:.66rem;color:var(--cyn);text-decoration:none;}
.cg-item p{color:var(--g2);}

/* ‚îÄ‚îÄ FAQ MODAL ‚îÄ‚îÄ */
.faq-modal{max-width:680px;}
.faq-item{border-bottom:1px solid var(--b1);overflow:hidden;}
.faq-item:last-child{border-bottom:none;}
.faq-q{display:flex;align-items:center;justify-content:space-between;padding:11px 14px;cursor:pointer;font-size:.78rem;font-weight:600;transition:background .12s;gap:10px;}
.faq-q:hover{background:rgba(255,255,255,.02);}
.faq-q-arrow{font-size:.6rem;color:var(--g2);flex-shrink:0;transition:transform .2s;}
.faq-q.open .faq-q-arrow{transform:rotate(90deg);}
.faq-a{display:none;padding:0 14px 12px;font-size:.75rem;color:var(--g1);line-height:1.75;}
.faq-a.open{display:block;}
.faq-tag{display:inline-block;padding:1px 6px;border-radius:3px;font-size:.58rem;font-weight:700;margin-right:4px;margin-bottom:4px;}
.faq-tag-class{background:rgba(124,58,237,.15);border:1px solid rgba(124,58,237,.2);color:#a78bfa;}
.faq-tag-sub{background:var(--cyn-l);border:1px solid rgba(8,145,178,.2);color:var(--cyn);}
.faq-section-hd{padding:8px 14px;font-size:.6rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--g2);background:var(--s2);}

/* ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ */
.loading{position:fixed;inset:0;background:var(--bg);display:none;align-items:center;justify-content:center;z-index:999;}
.loading.on{display:flex;}
.spin{width:26px;height:26px;border:2px solid var(--b1);border-top-color:var(--pur);border-radius:50%;animation:sp .7s linear infinite;}
@keyframes sp{to{transform:rotate(360deg);}}
.toast-box{position:fixed;bottom:16px;right:16px;padding:7px 13px;background:var(--s2);border:1px solid var(--cyn);border-radius:var(--r8);font-size:.74rem;color:var(--cyn);transform:translateY(60px);opacity:0;transition:all .3s;z-index:999;max-width:280px;}
.toast-box.on{transform:translateY(0);opacity:1;}
.empty-st{text-align:center;padding:36px 14px;color:var(--g2);}
.empty-st .ei{font-size:1.5rem;margin-bottom:5px;}

/* Resources toolbar */
.res-bar{padding:6px 24px;border-bottom:1px solid var(--b1);background:rgba(7,8,10,.98);display:flex;align-items:center;gap:8px;flex-shrink:0;}
.res-btn{display:flex;align-items:center;gap:5px;padding:4px 11px;background:transparent;border:1px solid var(--b1);border-radius:var(--r24);color:var(--g2);font-size:.66rem;cursor:pointer;transition:all .18s;white-space:nowrap;}
.res-btn:hover{border-color:var(--cyn);color:var(--cyn);}
.res-sep{width:1px;height:18px;background:var(--b1);margin:0 2px;}
</style>
</head>
<body>
<div class="loading" id="Ldr"><div class="spin"></div></div>
<div class="toast-box" id="Toast"></div>

<!-- ‚ïê‚ïê HEADER ‚ïê‚ïê -->
<header class="hdr">
  <div class="logo" onclick="goHome()">
    <div class="logo-mark">ind<em>xx</em></div>
    <div class="logo-tag">Xcellence in Indexing</div>
  </div>
  <div class="hdr-nav">
    <a href="https://www.indxx.com/expertise" target="_blank">Expertise</a>
    <a href="https://www.indxx.com/blogs" target="_blank">Indxx Bytes</a>
    <a href="https://www.indxx.com/governance" target="_blank">Governance</a>
    <a href="https://www.indxx.com/about-us" target="_blank">About Us</a>
    <div class="hdr-trial" id="HdrTrial">
      <div class="trial-dot"></div>
      <span class="trial-txt">Trial Active</span>
      <div class="trial-bar-wrap"><div class="trial-bar" id="HdrTrialBar" style="width:100%"></div></div>
      <span class="trial-days-txt" id="HdrTrialDays">30d left</span>
    </div>
    <div class="hdr-user" id="HdrUser">
      <div class="hdr-avatar" id="HdrAv">CL</div>
      <span class="hdr-uname" id="HdrUname">User</span>
      <button class="hdr-logout" onclick="doLogout()">Logout</button>
    </div>
    <button class="hdr-cta" onclick="window.open('https://www.indxx.com/contact-us','_blank')">Contact Us</button>
  </div>
</header>

<!-- ‚ïê‚ïê AUTH PAGE ‚ïê‚ïê -->
<div class="pg on" id="PgAuth">
  <div class="auth-layout" style="flex:1;overflow:hidden;">
    <div class="auth-hero">
      <div class="auth-eyebrow">‚¨° Indxx Thematic Industry Classification System</div>
      <h1 class="auth-h1">Classify Companies<br>by <span>Revenue Segments</span></h1>
      <p class="auth-sub">Screen 17,000+ companies with full L0 ‚Üí L1 ‚Üí L2 thematic mapping. Subscribe only to the securities you need.</p>
      <div class="auth-stats">
        <div><div class="astat-n">17,000+</div><div class="astat-l">Companies</div></div>
        <div><div class="astat-n">11</div><div class="astat-l">L0 Sectors</div></div>
        <div><div class="astat-n">55+</div><div class="astat-l">L1 Themes</div></div>
        <div><div class="astat-n">700+</div><div class="astat-l">L2 Sub-categories</div></div>
      </div>
      <div class="auth-btns">
        <button class="btn-white" onclick="switchTab('signup')">Start Free Trial</button>
        <button class="btn-outline" onclick="window.open('https://www.indxx.com/contact-us','_blank')">Talk to an Expert</button>
      </div>
      <div class="auth-bottom-grid">
        <div class="uc-strip">
          <div class="uc-strip-hd">Who uses ITICS</div>
          <div class="uc-cards">
            <div class="uc-card active" id="UcCard0"><span class="uc-icon">üìä</span><div class="uc-text"><strong>Index &amp; ETF Managers</strong><p>Screen pure-play AI or EV companies ‚Äî filter by L2 and revenue ‚â•50%.</p></div></div>
            <div class="uc-card" id="UcCard1"><span class="uc-icon">üè¶</span><div class="uc-text"><strong>Asset Managers &amp; Analysts</strong><p>Compare thematic exposure across portfolios with L1/L2 drill-down.</p></div></div>
            <div class="uc-card" id="UcCard2"><span class="uc-icon">üåè</span><div class="uc-text"><strong>Regional Desk Specialists</strong><p>Subscribe only to APAC or European securities with regional bundles.</p></div></div>
          </div>
        </div>
        <div class="live-ex">
          <div class="live-ex-hd">Live Example ‚Äî NVIDIA Corp</div>
          <div class="live-co-row">
            <div><div class="live-co-name">NVIDIA Corporation</div><div class="live-co-meta">US67066G1040 ¬∑ Technology ¬∑ United States</div></div>
            <span class="l0-chip" style="flex-shrink:0;margin-left:6px">Technology</span>
          </div>
          <div class="live-segs">
            <div class="live-seg-label">Revenue Segments (2025)</div>
            <div class="live-l1-block">
              <div class="live-l1-hd"><span class="live-l1-badge">601</span><span class="live-l1-name">Semiconductor</span></div>
              <div class="live-l2-row"><span class="live-l2-badge">60101</span><span class="live-l2-name">AI Accelerators / GPU</span><div class="live-bar-wrap"><div style="width:87.3%;height:100%;background:var(--grn);border-radius:2px;"></div></div><span class="live-pct" style="color:var(--grn)">87.3%</span><span class="rc rc-p" style="font-size:.54rem">Pure Play</span></div>
            </div>
            <div class="live-l1-block" style="border-left-color:var(--amb)">
              <div class="live-l1-hd" style="background:rgba(217,119,6,.05)"><span class="live-l1-badge" style="background:rgba(217,119,6,.1);border-color:rgba(217,119,6,.2);color:var(--amb)">701</span><span class="live-l1-name">Software</span></div>
              <div class="live-l2-row"><span class="live-l2-badge">70102</span><span class="live-l2-name">AI Software Platforms</span><div class="live-bar-wrap"><div style="width:8.2%;height:100%;background:var(--amb);border-radius:2px;"></div></div><span class="live-pct" style="color:var(--amb)">8.2%</span><span class="rc rc-q" style="font-size:.54rem">Quasi</span></div>
            </div>
          </div>
          <div class="live-footer">Subscribe to access 17,000+ companies like this</div>
        </div>
      </div>
    </div>
    <div class="auth-panel">
      <div class="auth-panel-logo"><div class="lm">ind<em>xx</em></div><div class="lt">Xcellence in Indexing</div></div>
      <div class="abox">
        <div class="abox-tabs">
          <button class="abox-tab on" id="TabLogin" onclick="switchTab('login')">Login</button>
          <button class="abox-tab" id="TabSignup" onclick="switchTab('signup')">Sign Up / Trial</button>
        </div>
        <div id="FrmLogin">
          <h2 class="abox-h">Welcome back</h2>
          <p class="abox-sub">Access your ITICS subscription</p>
          <div class="fld"><label>Client ID / Email</label><input type="text" id="LId" placeholder="Enter ID or email"></div>
          <div class="fld"><label>Password</label><input type="password" id="LPw" placeholder="Enter password"></div>
          <button class="abtn" id="LBtn">Sign In</button>
          <div class="asw">New here? <a onclick="switchTab('signup')">Create trial account ‚Üí</a></div>
          <div class="ahelp">Need help? Call <a href="tel:+18445546399">+1 (844) 55-INDXX</a> or email <a href="mailto:info@indxx.com">info@indxx.com</a></div>
        </div>
        <div id="FrmSignup" style="display:none">
          <h2 class="abox-h">Create Trial Account</h2>
          <p class="abox-sub">Free 30-day access ¬∑ No card required to preview</p>
          <div class="frow">
            <div class="fld"><label>First Name *</label><input type="text" id="SFn" placeholder="John"></div>
            <div class="fld"><label>Last Name</label><input type="text" id="SLn" placeholder="Doe"></div>
          </div>
          <div class="fld"><label>Work Email *</label><input type="email" id="SEm" placeholder="john@company.com"></div>
          <div class="fld"><label>Organisation</label><input type="text" id="SOrg" placeholder="Company name"></div>
          <div class="fld"><label>Password *</label><input type="password" id="SPw" placeholder="Min 6 characters"></div>
          <button class="abtn" id="SBtn">Create Account &amp; Preview</button>
          <div class="asw">Have an account? <a onclick="switchTab('login')">Sign in ‚Üí</a></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê SAMPLE ‚ïê‚ïê -->
<div class="pg" id="PgSample" style="display:none;flex-direction:column;">
  <div class="sample-banner">
    <div class="sb-info"><h2>Welcome to ITICS ‚Äî Sample Preview üëã</h2><p>L0 Sector visible only. <strong>L1 Themes, L2 Sub-categories &amp; revenue are locked</strong> until you subscribe.</p></div>
    <div class="sb-cta"><button class="btn-grad" onclick="goScreener()">Open Screener ‚Üí</button><button class="btn-grad" onclick="goScreener()">Subscribe Now</button></div>
  </div>
  <div class="sample-body">
    <div class="sec-label">3 Sample Companies ‚Äî L0 Visible ¬∑ L1 / L2 / Revenue Locked</div>
    <div class="tbl-wrap">
      <table>
        <thead><tr><th style="width:24px"></th><th>Company</th><th>ISIN</th><th>FY End</th><th>Country</th><th>L0 Sector</th><th>L1 Theme</th><th>L2 Sub-category</th><th>Revenue %</th><th>Classification</th><th></th></tr></thead>
        <tbody id="SampleTbody"></tbody>
      </table>
    </div>
    <div class="ghost-wrap">
      <div class="ghost-rows">
        <div class="ghost-row"><div class="gc" style="width:14px"></div><div class="gc" style="width:130px"></div><div class="gc" style="width:95px"></div><div class="gc" style="width:50px"></div><div class="gc" style="width:70px"></div><div class="gc" style="width:75px"></div><div class="gc" style="width:46px"></div></div>
        <div class="ghost-row"><div class="gc" style="width:14px"></div><div class="gc" style="width:115px"></div><div class="gc" style="width:95px"></div><div class="gc" style="width:50px"></div><div class="gc" style="width:60px"></div><div class="gc" style="width:80px"></div><div class="gc" style="width:44px"></div></div>
        <div class="ghost-row"><div class="gc" style="width:14px"></div><div class="gc" style="width:140px"></div><div class="gc" style="width:85px"></div><div class="gc" style="width:50px"></div><div class="gc" style="width:75px"></div><div class="gc" style="width:70px"></div><div class="gc" style="width:42px"></div></div>
      </div>
      <div class="ghost-cta"><p>17,000+ companies available ‚Äî subscribe to unlock L1, L2 &amp; revenue data</p><button class="btn-grad" onclick="goScreener()">Screen &amp; Subscribe ‚Üí</button></div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê SCREENER ‚ïê‚ïê -->
<div class="main-pg" id="PgScreener">
  <div class="pg-hdr">
    <div class="pg-hdr-l"><h1>Security Screener</h1><p>Filter by Sector ¬∑ Theme ¬∑ Sub-category ¬∑ Region ¬∑ Revenue ‚Üí Select ‚Üí Subscribe</p></div>
    <div style="display:flex;align-items:center;gap:9px">
      <span class="price-badge" id="PriceBadge"></span>
      <div class="yr-select-wrap">
        <select class="yr-select" id="ScrYrSel" onchange="setYrSel(this,'scr')">
          <option value="2025">2025</option>
          <option value="2024">2024</option>
          <option value="2023">2023</option>
        </select>
      </div>
    </div>
  </div>
  <!-- Resources bar -->
  <div class="res-bar">
    <button class="res-btn" onclick="dlGuide('itics')">üìò ITICS Understanding Guide</button>
    <button class="res-btn" onclick="dlGuide('subscription')">üìã Subscription Guide</button>
    <div class="res-sep"></div>
    <button class="res-btn" onclick="openFaq()">‚ùì FAQs</button>
  </div>
  <div class="main-body">
    <div class="fp open" id="ScrFP">
      <button class="fp-toggle-btn" onclick="toggleFpPanel('ScrFP')" title="Toggle Filters">
        <span>‚áÜ</span><span class="fp-toggle-label">Filters</span>
      </button>
      <div class="fp-inner">
        <div class="fp-body" id="ScrFPBody"></div>
        <div class="fp-footer"><button class="fp-apply" onclick="applyF()">Apply Filters</button><button class="fp-clear" onclick="clearF()">Clear</button></div>
      </div>
    </div>
    <div class="mid">
      <div class="rbar">
        <div class="rstat"><strong id="ScrCoCnt">0</strong> companies ¬∑ <span id="ScrSegCnt"></span></div>
        <div style="display:flex;align-items:center;gap:5px"><div class="srch-wrap"><input type="text" id="ScrQ" placeholder="Search company, ISIN, theme‚Ä¶" oninput="applyF()"></div></div>
      </div>
      <div class="mid-tbl" id="ScrTblWrap">
        <table style="width:100%;border-collapse:collapse;min-width:980px;">
          <thead style="position:sticky;top:0;z-index:5;background:var(--s2)"><tr>
            <th style="width:24px;padding:7px 11px"><input type="checkbox" class="cb" id="SelAll"></th>
            <th style="width:20px;padding:7px 11px"></th>
            <th style="padding:7px 11px">Company</th><th style="padding:7px 11px">ISIN</th><th style="padding:7px 11px">FY End</th>
            <th style="padding:7px 11px">Country</th><th style="padding:7px 11px">MCap ($mn)</th>
            <th style="padding:7px 11px">L0 Sector</th><th style="padding:7px 11px">Top L1 Theme</th>
            <th style="padding:7px 11px">Top L2 / Classification</th><th style="padding:7px 11px"></th>
          </tr></thead>
          <tbody id="ScrTbody"></tbody>
        </table>
      </div>
      <div class="sub-footer">
        <div class="sf-left">
          <div class="sf-info">
            <div class="sf-sel"><span id="SfCo">0</span> selected ¬∑ <span id="SfRegTxt" style="font-weight:400;color:var(--g2);font-size:.73rem"></span></div>
            <div class="sf-segs" id="SfSegs">0 segments</div>
          </div>
          <span class="bundle-badge" id="BundleBadge" style="display:none">üéÅ Bundle Applied</span>
        </div>
        <div class="sf-right">
          <div class="sf-price-wrap"><div class="sf-price" id="SfPrice">$0<sub>/mo after trial</sub></div><div class="sf-breakdown" id="SfBreakdown"></div></div>
          <button class="sf-btn" id="SfBtn" disabled onclick="openCO()">Subscribe &amp; Activate Trial ‚Üí</button>
        </div>
      </div>
    </div>
    <div class="sel-sum">
      <div class="ss-hd"><h3>Filter Summary</h3><p>L0 ‚Üí L1 ‚Üí L2 hierarchy</p></div>
      <div class="ss-body" id="SsBody"><div class="ss-empty"><div class="ei">üéØ</div>Select a sector to begin</div></div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê DASHBOARD ‚ïê‚ïê -->
<div class="main-pg" id="PgDash">
  <div class="pg-hdr">
    <div class="pg-hdr-l"><h1>My Subscribed Securities</h1><p>Full L0 ¬∑ L1 ¬∑ L2 ¬∑ Revenue data unlocked</p></div>
    <div style="display:flex;align-items:center;gap:7px">
      <div class="yr-select-wrap">
        <select class="yr-select" id="DashYrSel" onchange="setYrSel(this,'dash')">
          <option value="2025">2025</option>
          <option value="2024">2024</option>
          <option value="2023">2023</option>
        </select>
      </div>
    </div>
  </div>
  <!-- Resources bar -->
  <div class="res-bar">
    <button class="res-btn" onclick="dlGuide('itics')">üìò ITICS Understanding Guide</button>
    <button class="res-btn" onclick="dlGuide('subscription')">üìã Subscription Guide</button>
    <div class="res-sep"></div>
    <button class="res-btn" onclick="openFaq()">‚ùì FAQs</button>
  </div>
  <div class="main-body">
    <div class="fp open" id="DashFP">
      <button class="fp-toggle-btn" onclick="toggleFpPanel('DashFP')" title="Toggle Filters">
        <span>‚áÜ</span><span class="fp-toggle-label">Filters</span>
      </button>
      <div class="fp-inner">
        <div class="fp-body" id="DashFPBody"></div>
        <div class="fp-footer"><button class="fp-apply" onclick="applyDF()">Apply Filters</button><button class="fp-clear" onclick="clearDF()">Clear</button></div>
      </div>
    </div>
    <div class="mid" style="display:flex;flex-direction:column;">
      <div class="dash-cards" id="DashCards">
        <div class="dc trial-dc"><h4>Trial Status</h4><div class="dv" style="color:var(--grn);font-size:.95rem" id="DcTrial">Active</div><div class="ds" id="DcExp">‚Äî</div><div class="dc-prog"><div class="dc-prog-fill" id="DcProg" style="width:100%"></div></div></div>
        <div class="dc"><h4>Days Remaining</h4><div class="dv" id="DcDays" style="color:var(--cyn)">30</div><div class="ds">of 30-day trial</div></div>
        <div class="dc"><h4>Subscribed</h4><div class="dv" id="DcCos">0</div><div class="ds" id="DcPlanLbl">‚Äî</div></div>
        <div class="dc"><h4>Segments</h4><div class="dv" id="DcSegs" style="background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">0</div><div class="ds" id="DcSegsYrLbl">across all years</div></div>
      </div>
      <div class="dash-ctrl">
        <div class="dash-ctrl-l"><span style="font-size:.7rem;color:var(--g2)" id="DashResultTxt">Showing all</span></div>
        <div class="dash-ctrl-r">
          <div class="dash-srch"><input type="text" id="DashQ" placeholder="Search‚Ä¶" oninput="renderDash()"></div>
          <div class="exp-wrap" id="ExpWrap">
            <button class="btn-sm btn-sm-ghost" onclick="toggleExpDrop()">üì• Export ‚ñæ</button>
            <div class="exp-dropdown" id="ExpDrop">
              <div class="exp-group-label">CSV</div>
              <div class="exp-item" onclick="doExport('csv',2025)"><span>üìÑ</span><span style="flex:1">CSV ‚Äî 2025</span><span class="ei-badge" style="background:var(--acc-l);color:var(--acc)">CSV</span></div>
              <div class="exp-item" onclick="doExport('csv',2024)"><span>üìÑ</span><span style="flex:1">CSV ‚Äî 2024</span><span class="ei-badge" style="background:var(--acc-l);color:var(--acc)">CSV</span></div>
              <div class="exp-item" onclick="doExport('csv',2023)"><span>üìÑ</span><span style="flex:1">CSV ‚Äî 2023</span><span class="ei-badge" style="background:var(--acc-l);color:var(--acc)">CSV</span></div>
              <div class="exp-item" onclick="doExport('csv','all')"><span>üìÑ</span><span style="flex:1">CSV ‚Äî All Years</span><span class="ei-badge" style="background:var(--grn-l);color:var(--grn)">ALL</span></div>
              <div class="exp-group-label">Excel</div>
              <div class="exp-item" onclick="doExport('xlsx',2025)"><span>üìä</span><span style="flex:1">Excel ‚Äî 2025</span><span class="ei-badge" style="background:var(--grn-l);color:var(--grn)">XLSX</span></div>
              <div class="exp-item" onclick="doExport('xlsx',2024)"><span>üìä</span><span style="flex:1">Excel ‚Äî 2024</span><span class="ei-badge" style="background:var(--grn-l);color:var(--grn)">XLSX</span></div>
              <div class="exp-item" onclick="doExport('xlsx',2023)"><span>üìä</span><span style="flex:1">Excel ‚Äî 2023</span><span class="ei-badge" style="background:var(--grn-l);color:var(--grn)">XLSX</span></div>
              <div class="exp-item" onclick="doExport('xlsx','all')"><span>üìä</span><span style="flex:1">Excel ‚Äî All Years</span><span class="ei-badge" style="background:var(--grn-l);color:var(--grn)">ALL</span></div>
            </div>
          </div>
          <button class="btn-sm btn-sm-cyn" onclick="openManage()">‚öô Manage</button>
          <button class="btn-sm btn-sm-grad" onclick="goScreener()">+ Add More</button>
        </div>
      </div>
      <div class="mid-tbl">
        <table style="width:100%;border-collapse:collapse;min-width:980px;">
          <thead style="position:sticky;top:0;z-index:5;background:var(--s2)"><tr>
            <th style="width:20px;padding:7px 11px"></th>
            <th style="padding:7px 11px">Company</th><th style="padding:7px 11px">ISIN</th><th style="padding:7px 11px">FY End</th>
            <th style="padding:7px 11px">Country</th><th style="padding:7px 11px">MCap ($mn)</th>
            <th style="padding:7px 11px">L0 Sector</th><th style="padding:7px 11px">Top L1 Theme</th>
            <th style="padding:7px 11px">Top L2 / Classification</th><th style="padding:7px 11px"></th>
          </tr></thead>
          <tbody id="DashTbody"></tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê CHECKOUT MODAL ‚ïê‚ïê -->
<div class="modal-bg" id="MdlCO"><div class="modal co-modal"><div id="CoContent"></div></div></div>

<!-- ‚ïê‚ïê DETAIL MODAL ‚ïê‚ïê -->
<div class="modal-bg" id="MdlDet">
  <div class="modal" style="max-width:620px">
    <div class="det-hdr">
      <div class="det-hdr-info"><div class="det-co-name" id="DetName">‚Äî</div><div class="det-co-meta" id="DetMeta">‚Äî</div></div>
      <button class="mcls" onclick="closeDet()">√ó</button>
    </div>
    <div class="det-summary" id="DetSummary"></div>
    <div id="DetBody"></div>
  </div>
</div>

<!-- ‚ïê‚ïê MANAGE MODAL ‚ïê‚ïê -->
<div class="modal-bg" id="MdlManage">
  <div class="modal" style="max-width:560px">
    <div class="modal-hd"><div><h3>Manage Subscription</h3><p>Modify your package</p></div><button class="mcls" onclick="$$('MdlManage').classList.remove('on')">√ó</button></div>
    <div class="modal-body">
      <div class="manage-tab-bar">
        <button class="manage-tab on" id="MtabSelf" onclick="switchManage('self')">Self-Service</button>
        <button class="manage-tab" id="MtabContact" onclick="switchManage('contact')">Contact Indxx</button>
      </div>
      <div id="ManageSelf">
        <div class="info-box"><strong>Adding companies</strong> takes effect immediately. <strong>Removing companies</strong> takes effect at the next billing cycle.</div>
        <div class="warn-box"><strong>Regional additions</strong> are priced per region rate card.</div>
        <div style="font-size:.6rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--g2);margin-bottom:5px;">Current Subscription</div>
        <div id="ManageCurrentList" style="background:var(--s2);border-radius:var(--r8);padding:7px;max-height:150px;overflow-y:auto;margin-bottom:11px;"></div>
        <button class="btn-grad" onclick="$$('MdlManage').classList.remove('on');goScreener()" style="width:100%;padding:8px;border-radius:var(--r8);font-weight:700;font-size:.77rem;">Open Screener to Add Companies ‚Üí</button>
      </div>
      <div id="ManageContact" style="display:none">
        <div class="info-box">For bulk changes, enterprise renegotiations or complex removals, contact the Indxx client team.</div>
        <div class="contact-grid">
          <div class="cg-item"><div class="ci-icon">üìû</div><h5>Phone</h5><a href="tel:+18445546399">+1 (844) 55-INDXX</a></div>
          <div class="cg-item"><div class="ci-icon">‚úâÔ∏è</div><h5>Email</h5><a href="mailto:info@indxx.com">info@indxx.com</a></div>
          <div class="cg-item"><div class="ci-icon">üåê</div><h5>Contact Form</h5><a href="https://www.indxx.com/contact-us" target="_blank">indxx.com/contact-us</a></div>
          <div class="cg-item"><div class="ci-icon">üìÖ</div><h5>Business Hours</h5><p>Mon‚ÄìFri, 9AM‚Äì6PM EST</p></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê FAQ MODAL ‚ïê‚ïê -->
<div class="modal-bg" id="MdlFaq">
  <div class="modal faq-modal" style="max-width:680px;max-height:88vh;">
    <div class="modal-hd"><div><h3>Frequently Asked Questions</h3><p>ITICS Classification &amp; Subscription</p></div><button class="mcls" onclick="$$('MdlFaq').classList.remove('on')">√ó</button></div>
    <div id="FaqBody" style="overflow-y:auto;max-height:calc(88vh - 64px);"></div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var DB=[
  {id:'111047-C',isin:'INE466L01038',name:'360 ONE WAM Ltd',fy:'3/31/2024',l0:'Financials',country:'India',mcap:8200,segs:[{l1c:'103',l1:'Financial Services',l2c:'10308',l2:'Wealth and Asset Mgmt',r25:99.89,r24:99.20,r23:98.51},{l1c:'901',l1:'Others',l2c:'90102',l2:'Other Unallocated Revenue',r25:0.11,r24:0.80,r23:1.49}]},
  {id:'102249-C',isin:'GB00B1YW4409',name:'3i Group Plc',fy:'3/31/2024',l0:'Financials',country:'United Kingdom',mcap:24000,segs:[{l1c:'103',l1:'Financial Services',l2c:'10310',l2:'Private Equity & VC',r25:99.00,r24:98.50,r23:97.80},{l1c:'103',l1:'Financial Services',l2c:'10308',l2:'Wealth and Asset Mgmt',r25:1.00,r24:1.50,r23:2.20}]},
  {id:'112288-C',isin:'IE00BF5FX167',name:'3i Infrastructure PLC',fy:'3/31/2024',l0:'Financials',country:'United Kingdom',mcap:3800,segs:[{l1c:'103',l1:'Financial Services',l2c:'10311',l2:'Other Investment Companies',r25:100,r24:100,r23:100}]},
  {id:'108655-C',isin:'JP3352000008',name:'77 Bank Ltd',fy:'3/31/2024',l0:'Financials',country:'Japan',mcap:1900,segs:[{l1c:'101',l1:'Banking',l2c:'10110',l2:'Bank Leasing',r25:7.80,r24:8.20,r23:8.90},{l1c:'101',l1:'Banking',l2c:'10109',l2:'Retail & Corporate Banking',r25:75.20,r24:74.50,r23:73.80},{l1c:'901',l1:'Others',l2c:'90101',l2:'Others',r25:17.00,r24:17.30,r23:17.30}]},
  {id:'BRC001-C',isin:'GB0031348658',name:'Barclays PLC',fy:'12/31/2024',l0:'Financials',country:'United Kingdom',mcap:42000,segs:[{l1c:'101',l1:'Banking',l2c:'10109',l2:'Retail & Corporate Banking',r25:58.40,r24:57.10,r23:55.90},{l1c:'102',l1:'Investment Banking',l2c:'10201',l2:'Investment Banking Services',r25:35.60,r24:36.80,r23:38.10},{l1c:'901',l1:'Others',l2c:'90101',l2:'Others',r25:6.00,r24:6.10,r23:6.00}]},
  {id:'105849-C',isin:'INE470A01017',name:'3M India Ltd',fy:'3/31/2024',l0:'Industrials',country:'India',mcap:3200,segs:[{l1c:'903',l1:'Diversified Business',l2c:'90303',l2:'Consumer & Industrial Diversified',r25:49.99,r24:48.80,r23:47.60},{l1c:'903',l1:'Diversified Business',l2c:'90302',l2:'Industrial Diversified',r25:37.71,r24:38.90,r23:40.10},{l1c:'410',l1:'Consumer Services',l2c:'90301',l2:'Consumer Diversified',r25:10.46,r24:10.50,r23:10.60},{l1c:'901',l1:'Others',l2c:'90101',l2:'Others',r25:1.84,r24:1.80,r23:1.70}]},
  {id:'106177-C',isin:'FR0010220475',name:'Alstom Sa',fy:'3/31/2024',l0:'Industrials',country:'France',mcap:5100,segs:[{l1c:'604',l1:'Transportation Vehicles',l2c:'60402',l2:'Locomotive & Parts',r25:51.78,r24:50.40,r23:49.20},{l1c:'604',l1:'Transportation Vehicles',l2c:'60404',l2:'Rail Part Manufacturers',r25:33.93,r24:34.60,r23:35.40},{l1c:'608',l1:'Infrastructure Services',l2c:'60807',l2:'Railway Infrastructure',r25:14.29,r24:15.00,r23:15.40}]},
  {id:'GE001-C',isin:'US3696043013',name:'General Electric',fy:'12/31/2024',l0:'Industrials',country:'United States',mcap:189000,segs:[{l1c:'604',l1:'Transportation Vehicles',l2c:'60401',l2:'Jet Engine Manufacturer',r25:62.50,r24:60.10,r23:57.80},{l1c:'608',l1:'Infrastructure Services',l2c:'60801',l2:'Power Infrastructure',r25:28.30,r24:30.20,r23:32.10},{l1c:'901',l1:'Others',l2c:'90101',l2:'Others',r25:9.20,r24:9.70,r23:10.10}]},
  {id:'SIE001-C',isin:'DE0007236101',name:'Siemens AG',fy:'9/30/2024',l0:'Industrials',country:'Germany',mcap:142000,segs:[{l1c:'603',l1:'Industrial Machinery',l2c:'60301',l2:'Industrial Automation',r25:45.20,r24:44.50,r23:43.80},{l1c:'702',l1:'IT Services',l2c:'70201',l2:'Digital Industries',r25:30.10,r24:29.80,r23:29.20},{l1c:'608',l1:'Infrastructure Services',l2c:'60802',l2:'Smart Infrastructure',r25:24.70,r24:25.70,r23:27.00}]},
  {id:'102507-C',isin:'US02079K3059',name:'Alphabet Inc',fy:'12/31/2024',l0:'Communication Services',country:'United States',mcap:2100000,segs:[{l1c:'411',l1:'Media & Advertisement',l2c:'41103',l2:'Digital Ad Space',r25:66.92,r24:65.80,r23:64.50},{l1c:'702',l1:'IT Services',l2c:'70208',l2:'Cloud Service',r25:12.37,r24:11.20,r23:10.10},{l1c:'412',l1:'Online Consumer Services',l2c:'41205',l2:'Online Media Streaming',r25:11.91,r24:12.50,r23:13.30},{l1c:'701',l1:'Software',l2c:'70111',l2:'Ad Management Tools',r25:8.64,r24:10.20,r23:11.80},{l1c:'103',l1:'Financial Services',l2c:'90103',l2:'Internal Treasury',r25:0.16,r24:0.30,r23:0.30}]},
  {id:'MET001-C',isin:'US30303M1027',name:'Meta Platforms Inc',fy:'12/31/2024',l0:'Communication Services',country:'United States',mcap:1300000,segs:[{l1c:'411',l1:'Media & Advertisement',l2c:'41103',l2:'Digital Ad Space',r25:97.80,r24:97.40,r23:96.90},{l1c:'412',l1:'Online Consumer Services',l2c:'41206',l2:'Social Media Platform',r25:2.20,r24:2.60,r23:3.10}]},
  {id:'104367-C',isin:'US0231351067',name:'Amazon Com Inc',fy:'12/31/2024',l0:'Consumer Discretionary',country:'United States',mcap:1900000,segs:[{l1c:'412',l1:'Online Consumer Services',l2c:'41208',l2:'E-Commerce Platform',r25:63.20,r24:62.50,r23:61.80},{l1c:'702',l1:'IT Services',l2c:'70208',l2:'Cloud Service',r25:17.59,r24:16.30,r23:15.10},{l1c:'411',l1:'Media & Advertisement',l2c:'41103',l2:'Digital Ad Space',r25:9.57,r24:9.00,r23:8.40},{l1c:'412',l1:'Online Consumer Services',l2c:'41205',l2:'Online Media Streaming',r25:6.97,r24:8.20,r23:9.60},{l1c:'901',l1:'Others',l2c:'90101',l2:'Others',r25:2.67,r24:4.00,r23:5.10}]},
  {id:'TYT001-C',isin:'JP3633400001',name:'Toyota Motor Corp',fy:'3/31/2024',l0:'Consumer Discretionary',country:'Japan',mcap:245000,segs:[{l1c:'604',l1:'Transportation Vehicles',l2c:'60406',l2:'Hybrid Vehicles',r25:55.40,r24:54.10,r23:52.80},{l1c:'604',l1:'Transportation Vehicles',l2c:'60405',l2:'EV Battery',r25:22.30,r24:20.90,r23:18.40},{l1c:'604',l1:'Transportation Vehicles',l2c:'60407',l2:'ICE Vehicles',r25:18.10,r24:20.20,r23:23.40},{l1c:'901',l1:'Others',l2c:'90101',l2:'Others',r25:4.20,r24:4.80,r23:5.40}]},
  {id:'BYD001-C',isin:'CNE100000296',name:'BYD Company Ltd',fy:'12/31/2024',l0:'Consumer Discretionary',country:'China',mcap:98000,segs:[{l1c:'604',l1:'Transportation Vehicles',l2c:'60405',l2:'EV Battery',r25:82.50,r24:80.10,r23:77.60},{l1c:'603',l1:'Industrial Machinery',l2c:'60302',l2:'Electronic Components',r25:17.50,r24:19.90,r23:22.40}]},
  {id:'INF001-C',isin:'INE009A01021',name:'Infosys Ltd',fy:'3/31/2024',l0:'Technology',country:'India',mcap:78000,segs:[{l1c:'702',l1:'IT Services',l2c:'70202',l2:'IT Consulting & Services',r25:65.20,r24:64.50,r23:63.80},{l1c:'702',l1:'IT Services',l2c:'70208',l2:'Cloud Service',r25:22.30,r24:21.40,r23:20.50},{l1c:'701',l1:'Software',l2c:'70101',l2:'Enterprise Software',r25:12.50,r24:14.10,r23:15.70}]},
  {id:'CRWD01-C',isin:'US2270461096',name:'CrowdStrike Holdings',fy:'1/31/2024',l0:'Technology',country:'United States',mcap:78000,segs:[{l1c:'705',l1:'Cybersecurity',l2c:'70501',l2:'Endpoint Security',r25:94.20,r24:93.50,r23:92.80},{l1c:'705',l1:'Cybersecurity',l2c:'70502',l2:'Threat Intelligence',r25:5.80,r24:6.50,r23:7.20}]},
  {id:'NVDA01-C',isin:'US67066G1040',name:'NVIDIA Corporation',fy:'1/31/2024',l0:'Technology',country:'United States',mcap:2890000,segs:[{l1c:'601',l1:'Semiconductor',l2c:'60101',l2:'AI Accelerators / GPU',r25:87.30,r24:85.10,r23:82.40},{l1c:'701',l1:'Software',l2c:'70102',l2:'AI Software Platforms',r25:8.20,r24:9.30,r23:11.20},{l1c:'901',l1:'Others',l2c:'90101',l2:'Others',r25:4.50,r24:5.60,r23:6.40}]},
  {id:'100998-C',isin:'US0311621009',name:'Amgen Inc',fy:'12/31/2024',l0:'Health Care',country:'United States',mcap:156000,segs:[{l1c:'302',l1:'Pharmaceuticals',l2c:'30201',l2:'General Pharmaceuticals',r25:58.08,r24:57.20,r23:56.40},{l1c:'302',l1:'Pharmaceuticals',l2c:'30207',l2:'Infection & Inflammation Drugs',r25:19.83,r24:20.10,r23:20.40},{l1c:'302',l1:'Pharmaceuticals',l2c:'30219',l2:'Cardiovascular',r25:11.26,r24:11.50,r23:11.80},{l1c:'302',l1:'Pharmaceuticals',l2c:'30204',l2:'Cancer Novel Target',r25:6.65,r24:6.80,r23:7.00},{l1c:'901',l1:'Others',l2c:'90101',l2:'Others',r25:4.18,r24:4.40,r23:4.40}]},
  {id:'AZTR01-C',isin:'GB0009895292',name:'AstraZeneca PLC',fy:'12/31/2024',l0:'Health Care',country:'United Kingdom',mcap:229000,segs:[{l1c:'302',l1:'Pharmaceuticals',l2c:'30204',l2:'Cancer Novel Target',r25:38.50,r24:37.20,r23:35.90},{l1c:'302',l1:'Pharmaceuticals',l2c:'30219',l2:'Cardiovascular',r25:28.30,r24:29.10,r23:30.00},{l1c:'302',l1:'Pharmaceuticals',l2c:'30207',l2:'Infection & Inflammation',r25:21.40,r24:21.80,r23:22.20},{l1c:'302',l1:'Pharmaceuticals',l2c:'30201',l2:'General Pharmaceuticals',r25:11.80,r24:11.90,r23:11.90}]},
  {id:'101409-C',isin:'CA0084741085',name:'Agnico Eagle Mines',fy:'12/31/2024',l0:'Materials',country:'Canada',mcap:35000,segs:[{l1c:'801',l1:'Mining',l2c:'80102',l2:'Gold Mining',r25:98.41,r24:98.20,r23:97.90},{l1c:'801',l1:'Mining',l2c:'80103',l2:'Silver Mining',r25:0.96,r24:1.00,r23:1.10},{l1c:'801',l1:'Mining',l2c:'80105',l2:'Copper Mining',r25:0.58,r24:0.75,r23:0.90},{l1c:'801',l1:'Mining',l2c:'80110',l2:'Zinc Mining',r25:0.05,r24:0.05,r23:0.10}]},
  {id:'108037-C',isin:'AU000000AGL7',name:'AGL Energy Ltd',fy:'6/30/2024',l0:'Utilities',country:'Australia',mcap:5400,segs:[{l1c:'204',l1:'Utilities',l2c:'20403',l2:'Electric Utility',r25:48.13,r24:47.20,r23:46.40},{l1c:'901',l1:'Others',l2c:'90102',l2:'Other Unallocated Revenue',r25:33.30,r24:34.20,r23:35.10},{l1c:'204',l1:'Utilities',l2c:'20407',l2:'Gas Distribution',r25:14.14,r24:14.80,r23:15.50},{l1c:'202',l1:'Upstream Energy',l2c:'20202',l2:'Oil & Gas Exploration',r25:4.43,r24:3.80,r23:3.00}]},
  {id:'NGRD01-C',isin:'GB00BDR05C01',name:'National Grid PLC',fy:'3/31/2024',l0:'Utilities',country:'United Kingdom',mcap:41000,segs:[{l1c:'204',l1:'Utilities',l2c:'20403',l2:'Electric Utility',r25:62.80,r24:61.50,r23:60.20},{l1c:'204',l1:'Utilities',l2c:'20407',l2:'Gas Distribution',r25:37.20,r24:38.50,r23:39.80}]},
  {id:'100728-C',isin:'IL0010972789',name:'Amot Investments Ltd',fy:'12/31/2024',l0:'Real Estate',country:'Israel',mcap:1100,segs:[{l1c:'501',l1:'Real Estate',l2c:'50101',l2:'Commercial Real Estate',r25:68.50,r24:67.30,r23:66.10},{l1c:'608',l1:'Infrastructure Services',l2c:'60808',l2:'Property Management',r25:31.50,r24:32.70,r23:33.90}]},
  {id:'MDRN01-C',isin:'US60770K1079',name:'Moderna Inc',fy:'12/31/2024',l0:'Health Care',country:'United States',mcap:42000,segs:[{l1c:'302',l1:'Pharmaceuticals',l2c:'30220',l2:'Vaccines',r25:75.80,r24:74.20,r23:72.50},{l1c:'302',l1:'Pharmaceuticals',l2c:'30201',l2:'General Pharmaceuticals',r25:24.20,r24:25.80,r23:27.50}]}
];
var SAMPLE_IDS=['111047-C','102507-C','100998-C'];
// Pre-subscribed securities for Login flow
var LOGIN_PRESET_IDS=['NVDA01-C','102507-C','MET001-C','100998-C','AZTR01-C','BRC001-C','GE001-C'];
var REGION_PRICE={'United States':1.00,'Canada':1.25,'United Kingdom':1.50,'France':1.50,'Germany':1.50,'Japan':1.50,'Australia':1.50,'India':1.25,'China':1.50,'Israel':1.50,'default':1.50};
var REGION_GROUPS={'Americas':['United States','Canada'],'Europe':['United Kingdom','France','Germany','Israel'],'Asia Pacific':['Japan','Australia','India','China']};
var REGION_BUNDLES=[
  {key:'americas_std',label:'Americas Bundle',region:'Americas',price:80,max:100,note:'‚â§100 companies, US & Canada'},
  {key:'europe_std',label:'Europe Bundle',region:'Europe',price:120,max:100,note:'‚â§100 companies, European markets'},
  {key:'apac_std',label:'APAC Bundle',region:'Asia Pacific',price:120,max:100,note:'‚â§100 companies, Asia Pacific'},
  {key:'global_200',label:'Global 200',region:'All',price:280,max:200,note:'‚â§200 companies worldwide'},
  {key:'global_500',label:'Global 500',region:'All',price:600,max:500,note:'‚â§500 companies worldwide'},
];

var S={
  user:null,loggedIn:false,isLoginFlow:false,subscribed:[],plan:'per',
  trialDays:30,trialStart:null,scrYr:2025,dashYr:2025,
  selIds:[],expIds:[],filtered:DB.slice(),
  selL0:[],selL1:[],selL2:[],selGeo:[],activeRc:[],
  scrSecOpen:{l0:true,l1:false,l2:false,geo:false,rc:false,mcap:false,rv:false},
  dSelL0:[],dSelL1:[],dSelL2:[],dSelGeo:[],dActiveRc:[],
  dashSecOpen:{l0:true,l1:false,l2:false,geo:false,rc:false,mcap:false,rv:false},
  dashFiltered:[],coStep:1,coCard:{name:'John Smith',num:'4242 4242 4242 4242',exp:'12/26',cvv:'123'}
};

// ‚îÄ‚îÄ‚îÄ PRICING ‚îÄ‚îÄ‚îÄ
function pricePerCo(c){return REGION_PRICE[c]||REGION_PRICE.default;}
function regionOf(c){for(var r in REGION_GROUPS){if(REGION_GROUPS[r].indexOf(c)!==-1)return r;}return 'Other';}
function calcPricing(){
  var ids=S.selIds,n=ids.length;
  if(!n)return{n:0,segs:0,price:0,perCoPrice:0,breakdown:'',bundleApplied:null,regBreak:'',regMap:{}};
  var regMap={};
  ids.forEach(function(id){var co=DB.find(function(c){return c.id===id;});if(!co)return;var reg=regionOf(co.country);if(!regMap[reg])regMap[reg]={count:0,price:0,countries:{}};regMap[reg].count++;regMap[reg].price+=pricePerCo(co.country);regMap[reg].countries[co.country]=(regMap[reg].countries[co.country]||0)+1;});
  var perCoTotal=0;Object.keys(regMap).forEach(function(r){perCoTotal+=regMap[r].price;});
  var segs=ids.reduce(function(a,id){var co=DB.find(function(c){return c.id===id;});return a+(co?segsOf(co,S.scrYr).length:0);},0);
  var bundleApplied=null,finalPrice=perCoTotal;
  if(n>100){var applicable=REGION_BUNDLES.filter(function(b){if(b.max<n)return false;if(b.region==='All')return true;var rm=regMap[b.region];return rm&&rm.count===n;});if(applicable.length){applicable.sort(function(a,b){return a.price-b.price;});var cheapBundle=applicable[0];if(cheapBundle.price<perCoTotal){bundleApplied=cheapBundle;finalPrice=cheapBundle.price;}}}
  var regParts=Object.keys(regMap).map(function(r){return r+': '+regMap[r].count;});
  var breakdown=bundleApplied?'Bundle: '+bundleApplied.label+' ¬∑ saving $'+(perCoTotal-bundleApplied.price).toFixed(2):(regParts.join(' ¬∑ '));
  return{n:n,segs:segs,price:finalPrice,perCoPrice:perCoTotal,breakdown:breakdown,bundleApplied:bundleApplied,regBreak:regParts.join(' ¬∑ '),regMap:regMap};
}

// ‚îÄ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ‚îÄ
function $$(id){return document.getElementById(id);}
function showLdr(b){$$('Ldr').classList.toggle('on',b);}
function toast(m,d){var t=$$('Toast');t.textContent=m;t.classList.add('on');setTimeout(function(){t.classList.remove('on');},d||2800);}
function getR(s,yr){return yr===2025?s.r25:yr===2024?s.r24:s.r23;}
function rcOf(r){return r>=50?'Pure Play':r>=20?'Quasi':'Marginal';}
function rcCls(rc){return rc==='Pure Play'?'rc-p':rc==='Quasi'?'rc-q':'rc-m';}
function fmtN(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',');}
function segsOf(co,yr){return co.segs.map(function(s){var r=getR(s,yr);return Object.assign({},s,{rev:r,rc:rcOf(r)});});}
function topSeg(co,yr){var ss=segsOf(co,yr);return ss.reduce(function(a,b){return b.rev>a.rev?b:a;},ss[0]||{});}
function esc(s){return String(s).replace(/'/g,"\\'");}
function showPg(id){
  ['PgAuth','PgSample'].forEach(function(p){var el=$$(p);if(el){el.classList.remove('on');el.style.display='none';}});
  ['PgScreener','PgDash'].forEach(function(p){var el=$$(p);if(el)el.classList.remove('on');});
  var el=$$(id);
  if(el){if(id==='PgAuth'||id==='PgSample'){el.style.display='flex';el.classList.add('on');}else{el.classList.add('on');}}
}
function updateHdr(){
  $$('HdrUser').classList.toggle('on',S.loggedIn);
  if(S.user){$$('HdrAv').textContent=S.user.name.substring(0,2).toUpperCase();$$('HdrUname').textContent=S.user.name;}
  var hasT=S.loggedIn&&S.subscribed.length>0&&S.trialStart;
  $$('HdrTrial').classList.toggle('on',hasT);
  if(hasT){var end=new Date(S.trialStart.getTime()+S.trialDays*864e5);var dL=Math.max(0,Math.round((end-new Date())/864e5));var pct=Math.round((dL/S.trialDays)*100);$$('HdrTrialBar').style.width=pct+'%';$$('HdrTrialDays').textContent=dL+'d left';}
}

// ‚îÄ‚îÄ‚îÄ COLLAPSIBLE FILTER PANEL ‚îÄ‚îÄ‚îÄ
function toggleFpPanel(fpId){
  var fp=$$(fpId);
  fp.classList.toggle('open');
  fp.classList.toggle('closed');
}

// ‚îÄ‚îÄ‚îÄ YEAR DROPDOWN ‚îÄ‚îÄ‚îÄ
function setYrSel(sel,ctx){
  var yr=parseInt(sel.value);
  if(ctx==='scr'){S.scrYr=yr;applyF();}
  else{S.dashYr=yr;renderDash();}
}

// ‚îÄ‚îÄ‚îÄ AUTH ‚îÄ‚îÄ‚îÄ
function switchTab(t){$$('TabLogin').classList.toggle('on',t==='login');$$('TabSignup').classList.toggle('on',t==='signup');$$('FrmLogin').style.display=t==='login'?'block':'none';$$('FrmSignup').style.display=t==='signup'?'block':'none';}
$$('LBtn').addEventListener('click',function(){
  var id=$$('LId').value.trim(),pw=$$('LPw').value;
  if(!id||!pw){toast('Enter credentials');return;}
  showLdr(true);
  setTimeout(function(){
    showLdr(false);
    S.user={name:id,email:id};S.loggedIn=true;S.isLoginFlow=true;
    // Preset subscribed securities for login users
    S.subscribed=LOGIN_PRESET_IDS.slice();
    S.trialStart=new Date();
    updateHdr();
    goDash();
    toast('Welcome back, '+id+'!');
  },800);
});
$$('LPw').addEventListener('keypress',function(e){if(e.key==='Enter')$$('LBtn').click();});
$$('SBtn').addEventListener('click',function(){
  var fn=$$('SFn').value.trim(),em=$$('SEm').value.trim(),pw=$$('SPw').value;
  if(!fn||!em||!pw){toast('First name, email and password required');return;}
  if(pw.length<6){toast('Password min 6 chars');return;}
  showLdr(true);
  setTimeout(function(){
    showLdr(false);
    S.user={name:fn+' '+($$('SLn').value.trim()),email:em};
    S.loggedIn=true;S.isLoginFlow=false;
    updateHdr();goSample();
    toast('Account created! Explore sample data.');
  },900);
});
function doLogout(){S.loggedIn=false;S.user=null;S.subscribed=[];S.selIds=[];S.trialStart=null;S.isLoginFlow=false;updateHdr();showPg('PgAuth');switchTab('login');}
function goHome(){if(!S.loggedIn){showPg('PgAuth');return;}if(S.subscribed.length)goDash();else goSample();}

// ‚îÄ‚îÄ‚îÄ SAMPLE ‚îÄ‚îÄ‚îÄ
function goSample(){showPg('PgSample');renderSample();}
function renderSample(){
  var tb=$$('SampleTbody');tb.innerHTML='';
  SAMPLE_IDS.forEach(function(id){
    var co=DB.find(function(c){return c.id===id;});if(!co)return;
    var exp=S.expIds.indexOf('sp-'+id)!==-1;
    tb.innerHTML+='<tr class="pr'+(exp?' exp':'')+'" onclick="toggleExp(\'sp-'+id+'\')">'
      +'<td style="padding:8px 11px"><span class="earr">‚ñ∂</span></td>'
      +'<td style="padding:8px 11px"><span class="co-strong">'+co.name+'</span><span class="co-id">'+co.id+'</span></td>'
      +'<td style="padding:8px 11px" class="co-isin">'+co.isin+'</td>'
      +'<td style="padding:8px 11px;font-size:.7rem;color:var(--g1)">'+co.fy+'</td>'
      +'<td style="padding:8px 11px;font-size:.72rem">'+co.country+'</td>'
      +'<td style="padding:8px 11px"><span class="l0-chip">'+co.l0+'</span></td>'
      +'<td style="padding:8px 11px" class="locked">üîí Locked</td>'
      +'<td style="padding:8px 11px" class="locked">üîí Locked</td>'
      +'<td style="padding:8px 11px" class="locked">üîí ‚Ä¢‚Ä¢‚Ä¢‚Ä¢</td>'
      +'<td style="padding:8px 11px" class="locked">üîí ‚Ä¢‚Ä¢‚Ä¢‚Ä¢</td>'
      +'<td style="padding:8px 11px"><button class="vbtn" onclick="event.stopPropagation();openDet(\''+id+'\',2025)">View</button></td>'
      +'</tr>'
      +'<tr class="seg-expand-row'+(exp?' on':'')+'"><td class="seg-expand-cell" colspan="11">'+buildSegExpand(co,2025,false)+'</td></tr>';
  });
}

// ‚îÄ‚îÄ‚îÄ EXPAND TOGGLE ‚îÄ‚îÄ‚îÄ
function toggleExp(key){var i=S.expIds.indexOf(key);if(i===-1)S.expIds.push(key);else S.expIds.splice(i,1);if(key.startsWith('sp-'))renderSample();else if(key.startsWith('sc-'))renderScrTable();else if(key.startsWith('d-'))renderDash();}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SEGMENT EXPAND ‚Äî IMPROVED READABILITY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function buildSegExpand(co,yr,isSub){
  if(!isSub){
    return '<div style="padding:8px 12px 8px 40px;background:rgba(124,58,237,.03);">'
      +'<div style="display:flex;align-items:center;gap:8px;padding:7px 10px;background:var(--s2);border-radius:var(--r8);border-left:3px solid var(--b2);">'
      +'<span style="font-size:.68rem;color:var(--g3);">üîí Subscribe to unlock full L1 Theme and L2 Sub-category breakdown for <strong style="color:var(--g1)">'+co.name+'</strong></span>'
      +'</div></div>';
  }

  var ss=segsOf(co,yr).slice().sort(function(a,b){return b.rev-a.rev;});
  var l1Map={},l1Order=[];
  ss.forEach(function(s){
    if(!l1Map[s.l1]){l1Map[s.l1]={code:s.l1c,l2s:[]};l1Order.push(s.l1);}
    l1Map[s.l1].l2s.push(s);
  });

  var L1_COLORS=['#7c3aed','#0891b2','#059669','#d97706','#e8192c','#6366f1'];
  var nL1=l1Order.length,nL2=ss.length;

  var h='<div class="exp-wrap-outer">';

  // Column header row
  h+='<div class="exp-meta-row">'
    +'<span style="font-size:.62rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--g2);margin-right:4px;">L0:</span>'
    +'<span class="l0-chip" style="font-size:.62rem;padding:2px 8px;margin-right:8px;">'+co.l0+'</span>'
    +'<span style="font-size:.62rem;color:var(--g2);margin-right:auto;">'+nL1+' L1 Theme'+(nL1>1?'s':'')+' ¬∑ '+nL2+' L2 Segment'+(nL2>1?'s':'')+'</span>'
    +'<span class="col-hd" style="width:240px;padding-left:16px;">L2 SUB-CATEGORY</span>'
    +'<span class="col-hd" style="width:68px;text-align:center;">CODE</span>'
    +'<span class="col-hd" style="width:70px;text-align:right;padding-right:12px;">REVENUE</span>'
    +'<span class="col-hd" style="width:168px;padding-left:10px;">BREAKDOWN</span>'
    +'<span class="col-hd" style="width:98px;text-align:center;">CLASSIFICATION</span>'
    +'</div>';

  l1Order.forEach(function(l1,li){
    var d=l1Map[l1];
    var col=L1_COLORS[li%L1_COLORS.length];
    h+='<div class="exp-l1-group">';
    // Left label
    h+='<div class="exp-l1-label" style="border-left:3px solid '+col+';">'
      +'<span class="exp-l1-code">'+d.code+'</span>'
      +'<div class="exp-l1-name">'+l1+'</div>'
      +'<div class="exp-l1-sub">'+d.l2s.length+' sub-cat'+(d.l2s.length>1?'s':'')+'</div>'
      +'</div>';
    // Right L2 rows
    h+='<div class="exp-l2-rows">';
    d.l2s.forEach(function(s,si){
      var barC=s.rc==='Pure Play'?'var(--grn)':s.rc==='Quasi'?'var(--amb)':'var(--acc)';
      var barW=Math.min(s.rev,100);
      var rowBg=si%2===1?'background:rgba(255,255,255,.013);':'';
      h+='<div class="exp-l2-row" style="'+rowBg+'">'
        +'<div class="exp-l2-name" style="width:240px;flex-shrink:0;padding-left:16px;font-size:.84rem;font-weight:500;">'+s.l2+'</div>'
        +'<div class="exp-l2-code-cell" style="width:68px;"><span class="exp-l2-code-badge">'+s.l2c+'</span></div>'
        +'<div class="exp-l2-rev" style="width:70px;color:'+barC+';font-size:1rem;font-weight:800;padding-right:12px;">'+s.rev.toFixed(1)+'%</div>'
        +'<div class="exp-l2-bar-cell" style="width:168px;">'
          +'<div class="exp-l2-bar-track"><div class="exp-l2-bar-fill" style="width:'+barW+'%;background:'+barC+';"></div></div>'
        +'</div>'
        +'<div class="exp-l2-cls" style="width:98px;"><span class="rc '+rcCls(s.rc)+'" style="font-size:.68rem;padding:3px 9px;">'+s.rc+'</span></div>'
        +'</div>';
    });
    h+='</div></div>';
  });

  h+='</div>';
  return h;
}

// ‚îÄ‚îÄ‚îÄ FILTER PANEL BUILDER ‚îÄ‚îÄ‚îÄ
function buildFP(ctx){
  var isSrc=ctx==='scr';
  var targetList=isSrc?DB:DB.filter(function(c){return S.subscribed.indexOf(c.id)!==-1;});
  var selL0=isSrc?S.selL0:S.dSelL0;var selL1=isSrc?S.selL1:S.dSelL1;var selL2=isSrc?S.selL2:S.dSelL2;var selGeo=isSrc?S.selGeo:S.dSelGeo;var activeRc=isSrc?S.activeRc:S.dActiveRc;var secOpen=isSrc?S.scrSecOpen:S.dashSecOpen;
  var baseL0=targetList.filter(function(c){return !selL0.length||selL0.indexOf(c.l0)!==-1;});
  var l1Map=getL1Map(baseL0);var allL1s=Object.keys(l1Map).sort();var activeL1s=selL1.length?selL1:allL1s;
  var l2Set={};activeL1s.forEach(function(l1){if(l1Map[l1])Object.keys(l1Map[l1].l2s).forEach(function(l2){l2Set[l2]=l1Map[l1].l2s[l2];});});
  var allL2s=Object.keys(l2Set).sort();var allL0s=[...new Set(targetList.map(function(c){return c.l0;}))].sort();var allGeos=[...new Set(targetList.map(function(c){return c.country;}))].sort();

  function secHtml(key,step,title,countActive,hint,contentHtml){
    var isOpen=secOpen[key];var cnt=countActive>0?countActive:0;
    var cntHtml=cnt>0?'<span class="fp-sec-count">'+cnt+'</span>':'<span class="fp-sec-count none">all</span>';
    return '<div class="fp-sec" id="'+ctx+'-sec-'+key+'">'
      +'<div class="fp-sec-hd" onclick="toggleFpSec(\''+ctx+'\',\''+key+'\')">'
      +'<div class="fp-sec-hd-l">'+(step?'<span class="fp-sec-step">'+step+'</span>':'<span style="width:16px;height:16px;flex-shrink:0;"></span>')+'<span class="fp-sec-title">'+title+'</span>'+cntHtml+'</div>'
      +'<span class="fp-chevron'+(isOpen?' open':'')+'">‚ñ∂</span>'
      +'</div>'
      +'<div class="fp-sec-body'+(isOpen?' open':'')+'"><div class="fp-sec-hint">'+hint+'</div>'+contentHtml+'</div>'
      +'</div>';
  }
  var l0Html='<div class="pill-grid">';allL0s.forEach(function(v){var on=selL0.indexOf(v)!==-1;l0Html+='<span class="lvl-pill'+(on?' on-l0':'')+'" onclick="toggleLvl(\''+ctx+'\',\'l0\',\''+esc(v)+'\')">'+v+'</span>';});l0Html+='</div>';
  var l1Html=allL1s.length?'<div class="pill-grid">':'<div style="font-size:.66rem;color:var(--g3)">Select a sector first</div>';if(allL1s.length){allL1s.forEach(function(v){var on=selL1.indexOf(v)!==-1;l1Html+='<span class="lvl-pill'+(on?' on-l1':'')+'" onclick="toggleLvl(\''+ctx+'\',\'l1\',\''+esc(v)+'\')">'+v+'</span>';});l1Html+='</div>';}
  var l2Html=allL2s.length?'<div class="pill-grid">':'<div style="font-size:.66rem;color:var(--g3)">Select a theme (L1) first</div>';if(allL2s.length){allL2s.forEach(function(v){var on=selL2.indexOf(v)!==-1;l2Html+='<span class="lvl-pill'+(on?' on-l2':'')+'" onclick="toggleLvl(\''+ctx+'\',\'l2\',\''+esc(v)+'\')">'+v+'</span>';});l2Html+='</div>';}
  var geoHtml='';Object.keys(REGION_GROUPS).forEach(function(rg){var countries=REGION_GROUPS[rg].filter(function(ct){return allGeos.indexOf(ct)!==-1;});if(!countries.length)return;geoHtml+='<div style="font-size:.56rem;font-weight:700;text-transform:uppercase;color:var(--g3);margin:4px 0 2px;letter-spacing:.5px;">'+rg+'</div><div class="pill-grid" style="margin-bottom:3px;">';countries.forEach(function(v){var on=selGeo.indexOf(v)!==-1;geoHtml+='<span class="lvl-pill'+(on?' on-l1':'')+'" onclick="toggleLvl(\''+ctx+'\',\'geo\',\''+esc(v)+'\')">'+v+'</span>';});geoHtml+='</div>';});
  var rcDefs=[{k:'Pure Play',c:'on-p',lbl:'Pure Play ‚â•50%'},{k:'Quasi',c:'on-q',lbl:'Quasi 20‚Äì50%'},{k:'Marginal',c:'on-m',lbl:'Marginal <20%'}];
  var rcHtml='<div class="rc-chips">';rcDefs.forEach(function(d){var on=activeRc.indexOf(d.k)!==-1;rcHtml+='<span class="rc-chip'+(on?' '+d.c:'')+'" onclick="toggleLvl(\''+ctx+'\',\'rc\',\''+d.k+'\')">'+d.lbl+'</span>';});rcHtml+='</div>';
  var mcHtml='<div class="range-row"><label>Min</label><input type="number" id="'+ctx+'-mcmin" placeholder="1000" oninput="\''+ctx+'\'===\'scr\'?applyF():applyDF()"></div><div class="range-row"><label>Max</label><input type="number" id="'+ctx+'-mcmax" placeholder="500000" oninput="\''+ctx+'\'===\'scr\'?applyF():applyDF()"></div>';
  var rvHtml='<div class="range-row"><label>Min%</label><input type="number" id="'+ctx+'-rvmin" placeholder="50" min="0" max="100" oninput="\''+ctx+'\'===\'scr\'?applyF():applyDF()"></div><div class="range-row"><label>Max%</label><input type="number" id="'+ctx+'-rvmax" placeholder="100" min="0" max="100" oninput="\''+ctx+'\'===\'scr\'?applyF():applyDF()"></div>';
  var html='';
  html+=secHtml('l0','1','L0 Sector',selL0.length,'Broad sector ‚Äî starting point.',l0Html);
  html+=secHtml('l1','2','L1 Theme',selL1.length,'Pick themes within your sector(s).',l1Html);
  html+=secHtml('l2','3','L2 Sub-category',selL2.length,'Narrow to specific sub-categories.',l2Html);
  html+=secHtml('geo','','Region / Country',selGeo.length,'Filter by geography.',geoHtml);
  html+=secHtml('rc','','Revenue Class',activeRc.length,'Classification by revenue %.',rcHtml);
  html+=secHtml('mcap','','Market Cap',0,'Filter by market cap (USD mn).',mcHtml);
  html+=secHtml('rv','','Revenue %',0,'Filter by exact revenue % range.',rvHtml);
  var container=$$(isSrc?'ScrFPBody':'DashFPBody');if(container)container.innerHTML=html;
}

function toggleFpSec(ctx,key){var secOpen=ctx==='scr'?S.scrSecOpen:S.dashSecOpen;secOpen[key]=!secOpen[key];buildFP(ctx);}
function getL1Map(list){var m={};list.forEach(function(co){co.segs.forEach(function(s){if(!m[s.l1])m[s.l1]={code:s.l1c,l2s:{}};m[s.l1].l2s[s.l2]={code:s.l2c};});});return m;}

function toggleLvl(ctx,lvl,v){
  var isSrc=ctx==='scr';
  var selL0=isSrc?S.selL0:S.dSelL0;var selL1=isSrc?S.selL1:S.dSelL1;var selL2=isSrc?S.selL2:S.dSelL2;var selGeo=isSrc?S.selGeo:S.dSelGeo;var activeRc=isSrc?S.activeRc:S.dActiveRc;var secOpen=isSrc?S.scrSecOpen:S.dashSecOpen;var targetList=isSrc?DB:DB.filter(function(c){return S.subscribed.indexOf(c.id)!==-1;});
  function tog(arr,val){var i=arr.indexOf(val);if(i===-1)arr.push(val);else arr.splice(i,1);}
  if(lvl==='l0'){tog(selL0,v);var baseL0=targetList.filter(function(c){return !selL0.length||selL0.indexOf(c.l0)!==-1;});var l1Map=getL1Map(baseL0);if(isSrc){S.selL1=S.selL1.filter(function(l1){return l1Map[l1];});S.selL2=S.selL2.filter(function(l2){var e=false;Object.values(l1Map).forEach(function(v){if(v.l2s[l2])e=true;});return e;});}else{S.dSelL1=S.dSelL1.filter(function(l1){return l1Map[l1];});S.dSelL2=S.dSelL2.filter(function(l2){var e=false;Object.values(l1Map).forEach(function(v){if(v.l2s[l2])e=true;});return e;});}secOpen.l1=true;}
  else if(lvl==='l1'){tog(selL1,v);var baseL1=targetList.filter(function(c){return !selL0.length||selL0.indexOf(c.l0)!==-1;});var l1M=getL1Map(baseL1);var aL1s=isSrc?S.selL1:S.dSelL1;var vL2s={};aL1s.forEach(function(l1){if(l1M[l1])Object.keys(l1M[l1].l2s).forEach(function(l2){vL2s[l2]=1;});});if(isSrc)S.selL2=S.selL2.filter(function(l2){return vL2s[l2];});else S.dSelL2=S.dSelL2.filter(function(l2){return vL2s[l2];});secOpen.l2=true;}
  else if(lvl==='l2'){tog(selL2,v);}else if(lvl==='geo'){tog(selGeo,v);}else if(lvl==='rc'){tog(activeRc,v);}
  buildFP(ctx);if(isSrc)applyF();else applyDF();
}

// ‚îÄ‚îÄ‚îÄ SCREENER ‚îÄ‚îÄ‚îÄ
function goScreener(){showPg('PgScreener');buildFP('scr');if(!S.selL0.length)S.filtered=DB.slice();renderScrTable();renderSs();}
function applyF(){
  var mcMin=parseFloat($$('scr-mcmin')&&$$('scr-mcmin').value)||0;var mcMax=parseFloat($$('scr-mcmax')&&$$('scr-mcmax').value)||Infinity;var rvMin=parseFloat($$('scr-rvmin')&&$$('scr-rvmin').value)||0;var rvMax=parseFloat($$('scr-rvmax')&&$$('scr-rvmax').value)||100;var q=($$('ScrQ').value||'').toLowerCase();
  S.filtered=DB.filter(function(co){
    if(S.selL0.length&&S.selL0.indexOf(co.l0)===-1)return false;if(S.selGeo.length&&S.selGeo.indexOf(co.country)===-1)return false;if(co.mcap<mcMin||co.mcap>mcMax)return false;
    var ss=segsOf(co,S.scrYr);var hasSegF=S.selL1.length||S.selL2.length||S.activeRc.length||rvMin>0||rvMax<100;
    if(hasSegF){var match=ss.some(function(s){if(S.selL1.length&&S.selL1.indexOf(s.l1)===-1)return false;if(S.selL2.length&&S.selL2.indexOf(s.l2)===-1)return false;if(S.activeRc.length&&S.activeRc.indexOf(s.rc)===-1)return false;if(s.rev<rvMin||s.rev>rvMax)return false;return true;});if(!match)return false;}
    if(q){var cm=co.name.toLowerCase().indexOf(q)!==-1||co.isin.toLowerCase().indexOf(q)!==-1||co.country.toLowerCase().indexOf(q)!==-1;var sm=ss.some(function(s){return s.l1.toLowerCase().indexOf(q)!==-1||s.l2.toLowerCase().indexOf(q)!==-1;});if(!cm&&!sm)return false;}
    return true;
  });
  renderScrTable();renderSs();
}
function clearF(){S.selL0=[];S.selL1=[];S.selL2=[];S.selGeo=[];S.activeRc=[];S.scrSecOpen={l0:true,l1:false,l2:false,geo:false,rc:false,mcap:false,rv:false};S.filtered=DB.slice();buildFP('scr');renderScrTable();renderSs();}

function renderScrTable(){
  var list=S.filtered;var totSeg=list.reduce(function(a,c){return a+segsOf(c,S.scrYr).length;},0);
  $$('ScrCoCnt').textContent=list.length;$$('ScrSegCnt').textContent=totSeg+' segments';
  var tb=$$('ScrTbody');tb.innerHTML='';
  if(!list.length){tb.innerHTML='<tr><td colspan="11"><div class="empty-st"><div class="ei">üîç</div>No companies match filters</div></td></tr>';updateSf();return;}
  list.forEach(function(co){
    var ss=segsOf(co,S.scrYr),top=topSeg(co,S.scrYr);var isSub=S.subscribed.indexOf(co.id)!==-1,sel=S.selIds.indexOf(co.id)!==-1,exp=S.expIds.indexOf('sc-'+co.id)!==-1;
    tb.innerHTML+='<tr class="pr'+(exp?' exp':'')+'" onclick="toggleExp(\'sc-'+co.id+'\')">'
      +'<td style="padding:8px 11px" onclick="event.stopPropagation()"><input type="checkbox" class="cb"'+(sel?' checked':'')+' onchange="toggleSel(this,\''+co.id+'\')"></td>'
      +'<td style="padding:8px 11px"><span class="earr">‚ñ∂</span></td>'
      +'<td style="padding:8px 11px"><span class="co-strong">'+co.name+'<span class="seg-badge">'+ss.length+' segs</span></span><span class="co-id">'+co.id+'</span></td>'
      +'<td style="padding:8px 11px" class="co-isin">'+co.isin+'</td>'
      +'<td style="padding:8px 11px;font-size:.68rem;color:var(--g1)">'+co.fy+'</td>'
      +'<td style="padding:8px 11px;font-size:.7rem">'+co.country+'<br><span style="font-size:.58rem;color:var(--g2)">'+regionOf(co.country)+'</span></td>'
      +'<td style="padding:8px 11px;font-size:.7rem;color:var(--g1)">'+fmtN(co.mcap)+'</td>'
      +'<td style="padding:8px 11px"><span class="l0-chip">'+co.l0+'</span></td>'
      +(isSub?'<td style="padding:8px 11px;font-size:.7rem;color:#a78bfa">'+top.l1+'</td>':'<td style="padding:8px 11px" class="locked">üîí Locked</td>')
      +(isSub?'<td style="padding:8px 11px"><span class="rc '+rcCls(top.rc)+'">'+top.rc+'</span><br><span style="font-size:.58rem;color:var(--g2)">'+top.l2+'</span></td>':'<td style="padding:8px 11px" class="locked">üîí Locked</td>')
      +'<td style="padding:8px 11px"><button class="vbtn" onclick="event.stopPropagation();openDet(\''+co.id+'\','+S.scrYr+')">View</button></td>'
      +'</tr>'
      +'<tr class="seg-expand-row'+(exp?' on':'')+'"><td class="seg-expand-cell" colspan="11">'+buildSegExpand(co,S.scrYr,isSub)+'</td></tr>';
  });
  $$('SelAll').checked=list.length>0&&list.every(function(c){return S.selIds.indexOf(c.id)!==-1;});
  updateSf();
}

function toggleSel(el,id){var i=S.selIds.indexOf(id);if(el.checked&&i===-1)S.selIds.push(id);else if(!el.checked&&i!==-1)S.selIds.splice(i,1);updateSf();}
$$('SelAll').addEventListener('change',function(e){S.filtered.forEach(function(co){var i=S.selIds.indexOf(co.id);if(e.target.checked){if(i===-1)S.selIds.push(co.id);}else{if(i!==-1)S.selIds.splice(i,1);}});renderScrTable();});

function updateSf(){
  var c=calcPricing();
  $$('SfCo').textContent=c.n;$$('SfSegs').textContent=c.segs+' segments';$$('SfRegTxt').textContent=c.n>0?'('+Object.keys(c.regMap).join(', ')+')':'';
  $$('SfPrice').innerHTML='$'+c.price.toFixed(2)+'<sub>/mo after trial</sub>';$$('SfBreakdown').textContent=c.n>0?c.breakdown:'';$$('BundleBadge').style.display=c.bundleApplied?'inline-flex':'none';
  var pb=$$('PriceBadge');if(c.n>0&&c.n<=100){pb.textContent='Per-company ¬∑ $1.00‚Äì$1.50/co';pb.style.display='flex';}else if(c.n>100&&c.bundleApplied){pb.textContent='Bundle: '+c.bundleApplied.label;pb.style.display='flex';}else{pb.style.display='none';}
  $$('SfBtn').disabled=c.n===0;
}

function renderSs(){
  var body=$$('SsBody');
  if(!S.selL0.length&&!S.selL1.length&&!S.selL2.length){body.innerHTML='<div class="ss-empty"><div class="ei">üéØ</div>Select sector, theme or sub-category</div>';return;}
  var l1m=getL1Map(S.filtered);var html='';
  var l0s=S.selL0.length?S.selL0:[...new Set(DB.map(function(c){return c.l0;}))].filter(function(l0){return S.filtered.some(function(c){return c.l0===l0;});});
  l0s.forEach(function(l0){
    var l1sHere=Object.keys(l1m).filter(function(l1){return S.filtered.some(function(co){return co.l0===l0&&co.segs.some(function(s){return s.l1===l1;});});});var activeL1s=l1sHere.filter(function(l1){return !S.selL1.length||S.selL1.indexOf(l1)!==-1;});if(!activeL1s.length)return;
    html+='<div class="ss-l0-wrap"><div class="ss-l0-lbl"><span class="ss-l0-tag">L0: '+l0+'</span></div>';
    activeL1s.forEach(function(l1){var l2s=Object.keys(l1m[l1]?l1m[l1].l2s:{}).filter(function(l2){return !S.selL2.length||S.selL2.indexOf(l2)!==-1;});html+='<div class="ss-l1-item"><div class="ss-l1-name">'+l1+'</div><div class="ss-l2-wrap">';l2s.slice(0,4).forEach(function(l2){html+='<div class="ss-l2-dot">'+l2+'</div>';});if(l2s.length>4)html+='<div class="ss-l2-dot" style="color:var(--pur)">+'+(l2s.length-4)+' more</div>';html+='</div></div>';});
    html+='</div>';
  });
  var mc=S.filtered.length,ms=S.filtered.reduce(function(a,c){return a+segsOf(c,S.scrYr).length;},0);
  html+='<div class="ss-stat-box"><div class="sn">'+mc+'</div><div class="sl">companies</div><div class="ss2">'+ms+' segments</div></div>';
  body.innerHTML=html;
}

// ‚îÄ‚îÄ‚îÄ DASHBOARD FILTERS ‚îÄ‚îÄ‚îÄ
function applyDF(){
  var mcMin=parseFloat($$('dash-mcmin')&&$$('dash-mcmin').value)||0;var mcMax=parseFloat($$('dash-mcmax')&&$$('dash-mcmax').value)||Infinity;var rvMin=parseFloat($$('dash-rvmin')&&$$('dash-rvmin').value)||0;var rvMax=parseFloat($$('dash-rvmax')&&$$('dash-rvmax').value)||100;var q=($$('DashQ').value||'').toLowerCase();
  S.dashFiltered=DB.filter(function(co){
    if(S.subscribed.indexOf(co.id)===-1)return false;if(S.dSelL0.length&&S.dSelL0.indexOf(co.l0)===-1)return false;if(S.dSelGeo.length&&S.dSelGeo.indexOf(co.country)===-1)return false;if(co.mcap<mcMin||co.mcap>mcMax)return false;
    var ss=segsOf(co,S.dashYr);var hasF=S.dSelL1.length||S.dSelL2.length||S.dActiveRc.length||rvMin>0||rvMax<100;
    if(hasF){var m=ss.some(function(s){if(S.dSelL1.length&&S.dSelL1.indexOf(s.l1)===-1)return false;if(S.dSelL2.length&&S.dSelL2.indexOf(s.l2)===-1)return false;if(S.dActiveRc.length&&S.dActiveRc.indexOf(s.rc)===-1)return false;if(s.rev<rvMin||s.rev>rvMax)return false;return true;});if(!m)return false;}
    if(q){var cm=co.name.toLowerCase().indexOf(q)!==-1||co.isin.toLowerCase().indexOf(q)!==-1;var sm=ss.some(function(s){return s.l1.toLowerCase().indexOf(q)!==-1||s.l2.toLowerCase().indexOf(q)!==-1;});if(!cm&&!sm)return false;}
    return true;
  });
  renderDash();
}
function clearDF(){S.dSelL0=[];S.dSelL1=[];S.dSelL2=[];S.dSelGeo=[];S.dActiveRc=[];S.dashSecOpen={l0:true,l1:false,l2:false,geo:false,rc:false,mcap:false,rv:false};S.dashFiltered=DB.filter(function(co){return S.subscribed.indexOf(co.id)!==-1;});buildFP('dash');renderDash();}

// ‚îÄ‚îÄ‚îÄ DASHBOARD ‚îÄ‚îÄ‚îÄ
function goDash(){
  showPg('PgDash');updateHdr();
  var end=new Date((S.trialStart||new Date()).getTime()+S.trialDays*864e5);var dL=Math.max(0,Math.round((end-new Date())/864e5));var pct=Math.round((dL/S.trialDays)*100);
  $$('DcExp').textContent='Exp. '+end.toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'});$$('DcDays').textContent=dL;$$('DcProg').style.width=pct+'%';$$('DcCos').textContent=S.subscribed.length;
  var totalSegs=S.subscribed.reduce(function(a,id){var c=DB.find(function(x){return x.id===id;});return a+(c?segsOf(c,S.dashYr).length:0);},0);$$('DcSegs').textContent=totalSegs;$$('DcPlanLbl').textContent=S.plan==='per'?'Per Company':'Bundle';
  S.dashFiltered=DB.filter(function(co){return S.subscribed.indexOf(co.id)!==-1;});buildFP('dash');renderDash();
}
function renderDash(){
  var list=S.dashFiltered.length||S.dSelL0.length||S.dSelL1.length||S.dSelL2.length||S.dSelGeo.length||S.dActiveRc.length?S.dashFiltered:DB.filter(function(co){return S.subscribed.indexOf(co.id)!==-1;});
  var q=($$('DashQ').value||'').toLowerCase();if(q)list=list.filter(function(co){return co.name.toLowerCase().indexOf(q)!==-1||co.isin.toLowerCase().indexOf(q)!==-1;});
  $$('DashResultTxt').textContent='Showing '+list.length+' of '+S.subscribed.length+' companies';
  var totalSegs=S.subscribed.reduce(function(a,id){var c=DB.find(function(x){return x.id===id;});return a+(c?segsOf(c,S.dashYr).length:0);},0);$$('DcSegs').textContent=totalSegs;
  var tb=$$('DashTbody');tb.innerHTML='';
  if(!list.length){tb.innerHTML='<tr><td colspan="10"><div class="empty-st"><div class="ei">üìÇ</div>No results match filters</div></td></tr>';return;}
  list.forEach(function(co){
    var ss=segsOf(co,S.dashYr),top=topSeg(co,S.dashYr),exp=S.expIds.indexOf('d-'+co.id)!==-1;
    tb.innerHTML+='<tr class="pr'+(exp?' exp':'')+'" onclick="toggleExp(\'d-'+co.id+'\')">'
      +'<td style="padding:8px 11px"><span class="earr">‚ñ∂</span></td>'
      +'<td style="padding:8px 11px"><span class="co-strong">'+co.name+'<span class="seg-badge">'+ss.length+' segs</span></span><span class="co-id">'+co.id+'</span></td>'
      +'<td style="padding:8px 11px" class="co-isin">'+co.isin+'</td>'
      +'<td style="padding:8px 11px;font-size:.68rem;color:var(--g1)">'+co.fy+'</td>'
      +'<td style="padding:8px 11px;font-size:.7rem">'+co.country+'</td>'
      +'<td style="padding:8px 11px;font-size:.7rem;color:var(--g1)">'+fmtN(co.mcap)+'</td>'
      +'<td style="padding:8px 11px"><span class="l0-chip">'+co.l0+'</span></td>'
      +'<td style="padding:8px 11px;font-size:.7rem;color:#a78bfa">'+top.l1+'</td>'
      +'<td style="padding:8px 11px"><span class="rc '+rcCls(top.rc)+'">'+top.rc+'</span><br><span style="font-size:.58rem;color:var(--g2)">'+top.l2+'</span></td>'
      +'<td style="padding:8px 11px"><button class="vbtn" onclick="event.stopPropagation();openDet(\''+co.id+'\','+S.dashYr+')">View</button></td>'
      +'</tr>'
      +'<tr class="seg-expand-row'+(exp?' on':'')+'"><td class="seg-expand-cell" colspan="10">'+buildSegExpand(co,S.dashYr,true)+'</td></tr>';
  });
}

// ‚îÄ‚îÄ‚îÄ DETAIL MODAL ‚îÄ‚îÄ‚îÄ
function openDet(id,yr){
  var co=DB.find(function(c){return c.id===id;});if(!co)return;
  var y=yr||S.scrYr;var isSub=S.subscribed.indexOf(id)!==-1;var ss=segsOf(co,y);var top=topSeg(co,y);
  $$('DetName').textContent=co.name;$$('DetMeta').textContent=co.isin+' ¬∑ '+co.l0+' ¬∑ '+co.country+' ¬∑ FY: '+co.fy+' ¬∑ Year: '+y;
  $$('DetSummary').innerHTML='<div class="det-card"><h5>Segments</h5><div class="dv">'+(isSub?ss.length:co.segs.length)+'</div><div class="ds">'+y+' data</div></div>'
    +'<div class="det-card"><h5>Top Classification</h5><div class="dv" style="font-size:.75rem;margin-top:4px">'+(isSub?'<span class="rc '+rcCls(top.rc)+'" style="font-size:.8rem;padding:4px 10px;">'+top.rc+'</span>':'<span style="color:var(--b2);font-size:.8rem">üîí Locked</span>')+'</div></div>'
    +'<div class="det-card"><h5>Market Cap</h5><div class="dv" style="font-size:.85rem;margin-top:2px">$'+fmtN(co.mcap)+'mn</div></div>';
  if(!isSub){
    var fakeRows=co.segs.map(function(){return '<div class="lpr"><div class="lpr-pill" style="width:30px"></div><div class="lpr-pill" style="width:90px"></div><div class="lpr-pill" style="width:30px"></div><div class="lpr-pill" style="width:120px"></div><div style="flex:1"></div><div class="lpr-bar" style="width:55px"></div><div class="lpr-pill" style="width:55px"></div></div>';}).join('');
    $$('DetBody').innerHTML='<div class="det-locked-body"><div class="det-locked-l0"><span class="l0-chip" style="font-size:.7rem;padding:3px 9px;">'+co.l0+'</span><span>L0 Sector: <strong>'+co.l0+'</strong> &nbsp;¬∑&nbsp; Country: <strong>'+co.country+'</strong> &nbsp;¬∑&nbsp; MCap: <strong>$'+fmtN(co.mcap)+'mn</strong></span></div><div class="locked-preview"><div class="locked-preview-inner"><div style="font-size:.58rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--g2);margin-bottom:6px;">Revenue Segment Breakdown</div><div class="locked-preview-rows">'+fakeRows+'</div></div><div class="locked-overlay"><div class="lock-icon">üîí</div><div class="lock-msg">L1 Themes &amp; L2 Sub-categories Locked</div><div class="lock-sub">Subscribe to unlock full revenue segment breakdown.</div><button class="det-sub-btn" onclick="closeDet();goScreener()">Subscribe &amp; Unlock ‚Üí</button></div></div></div>';
  }else{
    var l1Map={},l1Order=[];ss.slice().sort(function(a,b){return b.rev-a.rev;}).forEach(function(s){if(!l1Map[s.l1]){l1Map[s.l1]={code:s.l1c,segs:[]};l1Order.push(s.l1);}l1Map[s.l1].segs.push(s);});
    var l1Colors=['var(--pur)','var(--cyn)','var(--grn)','var(--amb)','#f43f5e','#6366f1'];
    var segsHtml='<div class="det-body-seg-wrap">';
    l1Order.forEach(function(l1,li){var col=l1Colors[li%l1Colors.length];var d=l1Map[l1];segsHtml+='<div class="det-l1-block" style="border-left-color:'+col+'"><div class="det-l1-hd" style="background:rgba(124,58,237,.05)"><span class="det-l1-badge">'+d.code+'</span><span class="det-l1-name">'+l1+'</span></div>';d.segs.forEach(function(s){var barC=s.rc==='Pure Play'?'var(--grn)':s.rc==='Quasi'?'var(--amb)':'var(--acc)';segsHtml+='<div class="det-l2-row"><span class="det-l2-badge">'+s.l2c+'</span><span class="det-l2-name">'+s.l2+'</span><span class="det-l2-pct" style="color:'+barC+'">'+s.rev.toFixed(2)+'%</span><div class="det-l2-bar"><div class="det-l2-bar-fill" style="width:'+Math.min(s.rev,100)+'%;background:'+barC+'"></div></div><span class="rc '+rcCls(s.rc)+'">'+s.rc+'</span></div>';});segsHtml+='</div>';});
    segsHtml+='</div>';
    $$('DetBody').innerHTML='<div class="det-unlocked-body"><div class="det-yr-row"><span class="det-yr-lbl">Revenue Segment Breakdown ‚Äî L0 ‚Üí L1 ‚Üí L2</span><span style="font-size:.64rem;color:var(--g2)">Year: '+y+'</span></div>'+segsHtml+'</div>';
  }
  $$('MdlDet').classList.add('on');
}
function closeDet(){$$('MdlDet').classList.remove('on');}
$$('MdlDet').addEventListener('click',function(e){if(e.target===this)closeDet();});
$$('MdlCO').addEventListener('click',function(e){if(e.target===this)closeCO();});

// ‚îÄ‚îÄ‚îÄ EXPORT ‚îÄ‚îÄ‚îÄ
function toggleExpDrop(){$$('ExpDrop').classList.toggle('on');}
document.addEventListener('click',function(e){var w=$$('ExpWrap');if(w&&!w.contains(e.target))$$('ExpDrop').classList.remove('on');});
function buildRows(yr){var rows=[];S.subscribed.forEach(function(id){var co=DB.find(function(c){return c.id===id;});if(!co)return;segsOf(co,yr).forEach(function(s){rows.push({'Company_ID':co.id,'ISIN':co.isin,'Company_Name':co.name,'Country':co.country,'Region':regionOf(co.country),'Market_Cap_mn':co.mcap,'FY_End':co.fy,'L0_Sector':co.l0,'L1_Code':s.l1c,'L1_Thematic_Category':s.l1,'L2_Code':s.l2c,'L2_Sub_Category':s.l2,'Revenue_Pct':s.rev.toFixed(4),'Revenue_Classification':s.rc,'Year':yr});});});return rows;}
function triggerDownload(content,filename,mime){try{var blob=new Blob([content],{type:mime});var url=URL.createObjectURL(blob);var a=document.createElement('a');a.href=url;a.download=filename;document.body.appendChild(a);a.click();setTimeout(function(){URL.revokeObjectURL(url);document.body.removeChild(a);},300);}catch(e){toast('Download failed: '+e.message);}}
function doExport(fmt,yr){
  $$('ExpDrop').classList.remove('on');if(!S.subscribed.length){toast('No subscribed companies to export');return;}
  var fname='itics_'+(yr==='all'?'all_years':yr);
  if(fmt==='csv'){var rows=yr==='all'?[2025,2024,2023].reduce(function(a,y){return a.concat(buildRows(y));},[]):buildRows(yr);if(!rows.length){toast('No data to export');return;}var keys=Object.keys(rows[0]);var csv=keys.join(',')+'\r\n'+rows.map(function(r){return keys.map(function(k){var v=String(r[k]===null||r[k]===undefined?'':r[k]);return(v.indexOf(',')!==-1||v.indexOf('"')!==-1||v.indexOf('\n')!==-1)?'"'+v.replace(/"/g,'""')+'"':v;}).join(',');}).join('\r\n');triggerDownload('\uFEFF'+csv,fname+'.csv','text/csv;charset=utf-8;');toast('‚úÖ CSV downloaded ‚Äî '+rows.length+' rows');}
  else{if(typeof XLSX==='undefined'){toast('‚ö† Excel library loading ‚Äî retry in a moment');return;}try{var wb=XLSX.utils.book_new();var COL_W=[{wch:12},{wch:16},{wch:28},{wch:14},{wch:14},{wch:12},{wch:12},{wch:20},{wch:7},{wch:30},{wch:7},{wch:32},{wch:16},{wch:22},{wch:6}];if(yr==='all'){[2025,2024,2023].forEach(function(y){var ws=XLSX.utils.json_to_sheet(buildRows(y));ws['!cols']=COL_W;XLSX.utils.book_append_sheet(wb,ws,'Data_'+y);});var sumRows=S.subscribed.map(function(id){var co=DB.find(function(c){return c.id===id;});if(!co)return null;var ss=segsOf(co,2025),top=topSeg(co,2025);return{Company_ID:co.id,ISIN:co.isin,Company_Name:co.name,Country:co.country,Region:regionOf(co.country),L0_Sector:co.l0,Top_L1_Theme:top.l1,Top_L2:top.l2,Top_Rev_Pct_2025:parseFloat(top.rev.toFixed(2)),Classification_2025:top.rc,Total_Segments:ss.length,MCap_mn:co.mcap};}).filter(Boolean);var wss=XLSX.utils.json_to_sheet(sumRows);XLSX.utils.book_append_sheet(wb,wss,'Summary');}else{var ws2=XLSX.utils.json_to_sheet(buildRows(yr));ws2['!cols']=COL_W;XLSX.utils.book_append_sheet(wb,ws2,'ITICS_'+yr);}var wbout=XLSX.write(wb,{bookType:'xlsx',type:'array'});triggerDownload(new Uint8Array(wbout),fname+'.xlsx','application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');toast('‚úÖ Excel downloaded'+(yr==='all'?' (multi-sheet)':' ('+yr+')'));}catch(e){toast('Export error: '+e.message);}}
}

// ‚îÄ‚îÄ‚îÄ CHECKOUT ‚îÄ‚îÄ‚îÄ
function openCO(){if(!S.selIds.length){toast('Select at least one company');return;}S.coStep=1;renderCO();$$('MdlCO').classList.add('on');}
function closeCO(){$$('MdlCO').classList.remove('on');}
function renderCO(){
  var c=calcPricing();
  var stepHtml='<div class="stepper"><div class="step-item'+(S.coStep>=1?' active':'')+'">'+(S.coStep>1?'<div class="step-n" style="background:var(--grn)">‚úì</div>':'<div class="step-n">1</div>')+'<span>Summary</span></div><div class="step-sep"></div><div class="step-item'+(S.coStep>=2?' active':'')+'">'+(S.coStep>2?'<div class="step-n" style="background:var(--grn)">‚úì</div>':'<div class="step-n">2</div>')+'<span>Pricing</span></div><div class="step-sep"></div><div class="step-item'+(S.coStep>=3?' active':'')+'"><div class="step-n">3</div><span>Payment</span></div></div>';
  var bodyHtml='';
  if(S.coStep===1){var lines=S.selIds.map(function(id){var co=DB.find(function(c){return c.id===id;});if(!co)return'';return'<div class="order-row"><div><div class="on">'+co.name+'</div><div class="om">'+co.l0+' ¬∑ '+co.country+' ('+regionOf(co.country)+') ¬∑ $'+pricePerCo(co.country).toFixed(2)+'/mo</div></div><span style="font-size:.62rem;color:var(--cyn)">'+segsOf(co,S.scrYr).length+' segs</span></div>';}).join('');bodyHtml='<div class="msec"><div class="trial-note-box">üéâ <span>30-Day Free Trial ‚Äî $0 charged today. Cancel anytime.</span></div><div class="msec-title">Order Summary</div><div class="order-list">'+lines+'</div></div><div class="modal-nav"><button class="btn-next" onclick="S.coStep=2;renderCO()">Review Pricing ‚Üí</button></div>';}
  else if(S.coStep===2){var regRows='';Object.keys(c.regMap||{}).forEach(function(r){var rm=c.regMap[r];var cts=Object.keys(rm.countries).map(function(ct){return ct+' √ó'+rm.countries[ct]+' @$'+pricePerCo(ct).toFixed(2);}).join(', ');regRows+='<tr><td>'+r+'</td><td>'+rm.count+'</td><td style="font-size:.62rem;color:var(--g2)">'+cts+'</td><td style="font-weight:600;color:var(--cyn)">$'+rm.price.toFixed(2)+'</td></tr>';});var planCards='';var perIsRec=!c.bundleApplied;planCards+='<div class="plan-card'+(S.plan==='per'?' on':'')+(perIsRec?' recommended':'')+'" onclick="S.plan=\'per\';renderCO()"><h4>Per Company</h4><p>Pay exactly for your selection.</p><div class="pp">$'+c.perCoPrice.toFixed(2)+'<span style="font-size:.58rem;font-weight:400;color:var(--g2)">/mo</span></div>'+(c.n>100?'<div class="plan-note">‚ö† Bundle may save more</div>':'')+'</div>';var validBundles=REGION_BUNDLES.filter(function(b){if(b.max<c.n)return false;if(b.region==='All')return true;var rm=c.regMap&&c.regMap[b.region];return rm&&rm.count===c.n;});validBundles.forEach(function(b){var saving=c.perCoPrice-b.price;var isBest=c.bundleApplied&&c.bundleApplied.key===b.key;planCards+='<div class="plan-card'+(S.plan===b.key?' on':'')+(isBest?' recommended':'')+'" onclick="S.plan=\''+b.key+'\';renderCO()"><h4>'+b.label+'</h4><p>'+b.note+'</p><div class="pp">$'+b.price.toFixed(2)+'<span style="font-size:.58rem;font-weight:400;color:var(--g2)">/mo</span></div>'+(saving>0?'<div class="plan-note">üí∞ Save $'+saving.toFixed(2)+'/mo</div>':'')+'</div>';});var chosenPrice=S.plan==='per'?c.perCoPrice:(REGION_BUNDLES.find(function(b){return b.key===S.plan;})||{price:c.perCoPrice}).price;bodyHtml='<div class="msec"><div class="msec-title">Regional Breakdown</div><table class="reg-tbl"><thead><tr><th>Region</th><th>Cos</th><th>Detail</th><th>Subtotal</th></tr></thead><tbody>'+regRows+'</tbody></table></div><div class="msec"><div class="msec-title">Select Plan</div><div class="plan-grid-2">'+planCards+'</div></div><div class="order-total"><span>After 30-day trial</span><strong>$'+chosenPrice.toFixed(2)+'/mo</strong></div><div class="modal-nav"><button class="btn-back" onclick="S.coStep=1;renderCO()">‚Üê Back</button><button class="btn-next" onclick="S.coStep=3;renderCO()">Payment ‚Üí</button></div>';}
  else if(S.coStep===3){var chosenPrice2=S.plan==='per'?c.perCoPrice:(REGION_BUNDLES.find(function(b){return b.key===S.plan;})||{price:c.perCoPrice}).price;bodyHtml='<div class="msec"><div class="card-vis"><div class="cv-chip"></div><div class="cv-num" id="CvNum">'+S.coCard.num+'</div><div class="cv-bot"><span>Holder<strong id="CvName">'+S.coCard.name.toUpperCase()+'</strong></span><span>Expires<strong id="CvExp">'+S.coCard.exp+'</strong></span></div><div class="cv-logo" id="CvLogo">VISA</div></div><div class="fld"><label>Cardholder Name</label><input type="text" id="ChN" value="'+S.coCard.name+'" oninput="S.coCard.name=this.value;updCard()"></div><div class="fld"><label>Card Number</label><input type="text" id="ChNum" maxlength="19" value="'+S.coCard.num+'" oninput="S.coCard.num=this.value;fmtCN(this);updCard()"></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:7px"><div class="fld"><label>Expiry</label><input type="text" id="ChExp" maxlength="5" value="'+S.coCard.exp+'" oninput="S.coCard.exp=this.value;fmtExp(this);updCard()"></div><div class="fld"><label>CVV</label><input type="password" id="ChCvv" maxlength="4" value="'+S.coCard.cvv+'" oninput="S.coCard.cvv=this.value"></div></div><div class="order-total" style="margin-bottom:6px"><span>Due today</span><strong style="color:var(--grn)">$0.00</strong></div><div class="order-total"><span>After trial</span><strong>$'+chosenPrice2.toFixed(2)+'/mo</strong></div></div><div class="modal-nav"><button class="btn-back" onclick="S.coStep=2;renderCO()">‚Üê Back</button><button class="btn-next" style="background:var(--grad)" onclick="completePay()">üîí Activate Free Trial</button></div><div class="secure-line">256-bit SSL ¬∑ PCI-DSS Compliant ¬∑ $0 charged today</div>';setTimeout(updCard,10);}
  $$('CoContent').innerHTML='<div class="modal-hd"><div><h3>Subscribe to ITICS</h3><p>Step '+S.coStep+' of 3</p></div><button class="mcls" onclick="closeCO()">√ó</button></div><div class="modal-body">'+stepHtml+bodyHtml+'</div>';
}
function fmtCN(el){var v=el.value.replace(/\D/g,'').substring(0,16);el.value=v.replace(/(.{4})/g,'$1 ').trim();S.coCard.num=el.value;}
function fmtExp(el){var v=el.value.replace(/\D/g,'');if(v.length>=3)el.value=v.substring(0,2)+'/'+v.substring(2,4);S.coCard.exp=el.value;}
function updCard(){var n=$$('CvNum'),nm=$$('CvName'),ex=$$('CvExp'),lo=$$('CvLogo');if(n)n.textContent=S.coCard.num||'‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢';if(nm)nm.textContent=(S.coCard.name||'YOUR NAME').toUpperCase();if(ex)ex.textContent=S.coCard.exp||'MM/YY';if(lo){var f=(S.coCard.num.replace(/\s/g,'')||'').charAt(0);lo.textContent={4:'VISA',5:'MC',3:'AMEX',6:'DISC'}[f]||'üí≥';}}
function completePay(){
  var nm=$$('ChN')&&$$('ChN').value.trim();var nu=($$('ChNum')&&$$('ChNum').value.replace(/\s/g,''))||'';var ex=$$('ChExp')&&$$('ChExp').value;var cv=$$('ChCvv')&&$$('ChCvv').value;
  if(!nm||nu.length<16||!ex||ex.length<4||!cv||cv.length<3){toast('Complete all card details');return;}
  showLdr(true);setTimeout(function(){showLdr(false);S.selIds.forEach(function(id){if(S.subscribed.indexOf(id)===-1)S.subscribed.push(id);});S.trialStart=new Date();
  var pills=S.subscribed.map(function(id){var co=DB.find(function(c){return c.id===id;});return co?'<div class="spill">'+co.name+'</div>':'';}).join('');
  $$('CoContent').innerHTML='<div class="modal-body"><div class="success-body"><div class="sico">üéâ</div><h2>Trial Activated!</h2><p>Your 30-day free trial is live.<br>'+S.subscribed.length+' companies fully unlocked.</p><div class="spills">'+pills+'</div><button class="btn-dash" onclick="closeCO();goDash()">Go to Dashboard ‚Üí</button></div></div>';},1500);
}

// ‚îÄ‚îÄ‚îÄ MANAGE ‚îÄ‚îÄ‚îÄ
function openManage(){var list=$$('ManageCurrentList');list.innerHTML=S.subscribed.map(function(id){var co=DB.find(function(c){return c.id===id;});if(!co)return'';return'<div class="order-row"><div><div class="on">'+co.name+'</div><div class="om">'+co.l0+' ¬∑ '+co.country+' ¬∑ $'+pricePerCo(co.country).toFixed(2)+'/mo</div></div><span class="l0-chip" style="font-size:.58rem">'+co.l0+'</span></div>';}).join('');if(!S.subscribed.length)list.innerHTML='<div style="text-align:center;padding:12px;color:var(--g2);font-size:.72rem">No subscribed companies yet</div>';$$('MdlManage').classList.add('on');}
function switchManage(t){$$('MtabSelf').classList.toggle('on',t==='self');$$('MtabContact').classList.toggle('on',t==='contact');$$('ManageSelf').style.display=t==='self'?'block':'none';$$('ManageContact').style.display=t==='contact'?'block':'none';}

// ‚îÄ‚îÄ‚îÄ FAQ ‚îÄ‚îÄ‚îÄ
var FAQ_DATA=[
  {section:'Understanding ITICS Classification'},
  {q:'What is ITICS?',a:'ITICS (Indxx Thematic Industry Classification System) is a proprietary revenue-based classification framework developed by Indxx. Unlike traditional GICS or SIC codes that classify a company by its primary business, ITICS maps each company\'s revenue across multiple L1 Thematic Categories and L2 Sub-categories, reflecting the true economic mix of the business.'},
  {q:'What do L0, L1, and L2 mean?',a:'ITICS uses a three-tier hierarchy: <br><br><strong>L0 (Sector)</strong> ‚Äî The broad sector (e.g., Technology, Financials, Health Care). There are 11 L0 Sectors in ITICS.<br><strong>L1 (Thematic Category)</strong> ‚Äî A theme within a sector (e.g., Semiconductor, Banking, Pharmaceuticals). There are 55+ L1 themes.<br><strong>L2 (Sub-category)</strong> ‚Äî A specific product or revenue line within an L1 theme (e.g., AI Accelerators / GPU, Retail & Corporate Banking). There are 700+ L2 sub-categories.'},
  {q:'What are the 11 L0 Sectors in ITICS?',a:'The 11 L0 Sectors are: Technology, Financials, Health Care, Consumer Discretionary, Industrials, Communication Services, Materials, Utilities, Real Estate, Energy, and Consumer Staples.'},
  {q:'What does "Revenue %" mean in the data?',a:'Revenue % represents the proportion of a company\'s total reported revenue attributable to each L2 Sub-category in the selected fiscal year. All L2 segments for a company sum to 100%. This allows precise measurement of thematic exposure.'},
  {q:'What is a "Pure Play", "Quasi", or "Marginal" classification?',a:'These classifications indicate the strength of a company\'s thematic exposure within a given L2 Sub-category:<br><br><strong style="color:var(--grn)">Pure Play (‚â•50%)</strong> ‚Äî More than half of revenue comes from this sub-category. The company is a core constituent of this theme.<br><strong style="color:var(--amb)">Quasi (20‚Äì49%)</strong> ‚Äî Meaningful but not dominant exposure. Suitable for broad thematic indices.<br><strong style="color:var(--acc)">Marginal (&lt;20%)</strong> ‚Äî Minor revenue contribution. Typically excluded from pure-play index strategies.'},
  {q:'How frequently is the data updated?',a:'ITICS data is updated annually. Each company\'s revenue segments are mapped based on its most recently published annual report. The platform currently covers fiscal years 2023, 2024, and 2025. Intra-year updates may be made for significant corporate restructurings or restatements.'},
  {q:'How does ITICS differ from GICS or ICB?',a:'GICS and ICB assign a single primary classification to each company. ITICS instead distributes revenue across multiple themes proportionally. This means a conglomerate like Amazon is classified across E-Commerce, Cloud Services, Digital Advertising, and Streaming ‚Äî capturing its true diversified exposure rather than forcing a single-bucket label.'},
  {q:'Why might a company have revenue in "Others" (L1 901)?',a:'The "Others" category captures revenue that does not map to a named L1/L2 theme ‚Äî typically unallocated corporate revenue, holding company income, or minor revenue lines below materiality thresholds. It ensures every company\'s segments sum to exactly 100%.'},
  {section:'Subscription & Access'},
  {q:'How does the free trial work?',a:'New users receive a 30-day free trial upon sign-up. During the trial, you have full access to all subscribed securities ‚Äî including L1, L2, revenue %, and classification data. No credit card is required to start, but payment details are collected at subscription activation. You will not be charged until the trial period ends.'},
  {q:'How is pricing determined?',a:'ITICS uses a per-security pricing model based on the region of the company:<br><br>‚Ä¢ United States / Canada (Americas): $1.00‚Äì$1.25 per company/month<br>‚Ä¢ Europe / Asia Pacific / Other: $1.50 per company/month<br><br>For portfolios exceeding 100 companies, regional or global bundles may offer savings. Bundles are automatically surfaced during checkout.'},
  {q:'What are regional bundles?',a:'Regional bundles provide a fixed monthly price for all companies within a geographic scope, up to a defined maximum:<br><br>‚Ä¢ <strong>Americas Bundle</strong>: $80/mo, up to 100 companies (US & Canada)<br>‚Ä¢ <strong>Europe Bundle</strong>: $120/mo, up to 100 companies<br>‚Ä¢ <strong>APAC Bundle</strong>: $120/mo, up to 100 companies<br>‚Ä¢ <strong>Global 200</strong>: $280/mo, up to 200 companies worldwide<br>‚Ä¢ <strong>Global 500</strong>: $600/mo, up to 500 companies worldwide'},
  {q:'Can I subscribe to only specific securities?',a:'Yes. ITICS is designed for selective subscription. Use the Security Screener to filter by sector, theme, sub-category, region, and revenue classification. Select only the companies you need, and subscribe at a per-company rate. You can add more companies at any time from the dashboard.'},
  {q:'What happens when I add or remove companies?',a:'<strong>Adding companies</strong> takes effect immediately ‚Äî the new security appears in your dashboard with full L1/L2/revenue data at your next session or page refresh.<br><br><strong>Removing companies</strong> takes effect at the end of your current billing cycle. You retain access to removed companies until the billing period ends.'},
  {q:'Can I export data?',a:'Yes. Subscribed users can export data in CSV or Excel (XLSX) format from the dashboard. You can export data for individual years (2023, 2024, or 2025) or all years combined. Multi-year Excel exports include separate sheets per year plus a Summary sheet.'},
  {q:'Who do I contact for enterprise or bulk subscriptions?',a:'For portfolios requiring 500+ companies, custom data deliveries (FTP, API), white-label licensing, or index construction partnerships, please contact the Indxx client team directly:<br><br>üìû +1 (844) 55-INDXX<br>‚úâÔ∏è info@indxx.com<br>üåê indxx.com/contact-us'},
  {q:'Is my data secure?',a:'Yes. All data in transit is encrypted using 256-bit SSL/TLS. Payment processing is PCI-DSS compliant. Indxx does not store raw card numbers on its servers ‚Äî payment tokenization is handled by a certified payment processor.'},
];

function openFaq(){
  var body=$$('FaqBody');var html='';
  FAQ_DATA.forEach(function(item,idx){
    if(item.section){html+='<div class="faq-section-hd">'+item.section+'</div>';}
    else{html+='<div class="faq-item"><div class="faq-q" id="fq'+idx+'" onclick="toggleFaq('+idx+')">'+item.q+'<span class="faq-q-arrow">‚ñ∂</span></div><div class="faq-a" id="fa'+idx+'">'+item.a+'</div></div>';}
  });
  body.innerHTML=html;
  $$('MdlFaq').classList.add('on');
}
function toggleFaq(idx){
  var q=$$('fq'+idx),a=$$('fa'+idx);
  if(!q||!a)return;
  var isOpen=q.classList.contains('open');
  q.classList.toggle('open',!isOpen);
  a.classList.toggle('open',!isOpen);
}
$$('MdlFaq').addEventListener('click',function(e){if(e.target===this)this.classList.remove('on');});

// ‚îÄ‚îÄ‚îÄ GUIDE DOWNLOADS ‚îÄ‚îÄ‚îÄ
function dlGuide(type){
  var content,fname;
  if(type==='itics'){
    fname='ITICS_Understanding_Guide.txt';
    content=[
'ITICS ‚Äî INDXX THEMATIC INDUSTRY CLASSIFICATION SYSTEM',
'Understanding Guide  |  Version 2025.1  |  Indxx LLC',
'================================================================',
'',
'1. INTRODUCTION',
'   ITICS is a revenue-based multi-segment classification framework',
'   covering 17,000+ listed companies across 60+ countries. Unlike',
'   single-bucket systems (GICS, ICB, TRBC), ITICS distributes each',
'   company\'s annual revenue proportionally across up to 20+ L2',
'   sub-categories, providing granular thematic exposure data.',
'',
'2. HIERARCHY',
'   L0  Sector            (11 sectors)',
'   ‚îî‚îÄ‚îÄ L1  Thematic Category  (55+ themes)',
'       ‚îî‚îÄ‚îÄ L2  Sub-category     (700+ sub-categories)',
'',
'3. THE 11 L0 SECTORS',
'   100  Financials',
'   200  Energy',
'   300  Health Care',
'   400  Consumer Discretionary',
'   410  Consumer Staples',
'   500  Real Estate',
'   600  Industrials',
'   700  Technology',
'   800  Materials',
'   900  Communication Services',
'   (910 Utilities)',
'',
'4. REVENUE % MAPPING',
'   Each L2 segment carries a Revenue % ‚Äî the share of total company',
'   revenue from that sub-category. All L2 segments for one company',
'   in one fiscal year sum to exactly 100%.',
'',
'   Example ‚Äî NVIDIA (FY2025):',
'     L0:  Technology',
'     L1:  Semiconductor (60101) ........... 87.3%  ‚Üí Pure Play',
'     L1:  Software      (70102) .............8.2%  ‚Üí Quasi',
'     L1:  Others        (90101) .............4.5%  ‚Üí Marginal',
'',
'5. REVENUE CLASSIFICATION',
'   Pure Play   ‚â• 50%  ‚Äî Core thematic company',
'   Quasi       20‚Äì49% ‚Äî Meaningful exposure',
'   Marginal    < 20%  ‚Äî Minor exposure',
'',
'   Classification is applied at the L2 sub-category level.',
'   A single company may be Pure Play in one L2 and Marginal',
'   in another simultaneously.',
'',
'6. USE CASES',
'   A. ETF / Index construction: filter L2 = "AI Accelerators / GPU"',
'      + Classification = "Pure Play" to build a concentrated AI index.',
'   B. Portfolio attribution: compare portfolio companies\' thematic',
'      weights across L1 themes over 2023-2025.',
'   C. Peer group analysis: identify all companies with >30% revenue',
'      in "EV Battery" (L2 60405) regardless of primary GICS sector.',
'',
'7. DATA COVERAGE',
'   Fiscal years available: 2023, 2024, 2025',
'   Update frequency: Annual (post earnings season)',
'   Geographic coverage: Americas, Europe, Asia Pacific, Other',
'',
'8. CONTACT',
'   Indxx LLC  |  info@indxx.com  |  +1 (844) 55-INDXX',
'   www.indxx.com',
    ].join('\r\n');
  } else {
    fname='ITICS_Subscription_Guide.txt';
    content=[
'ITICS ‚Äî SUBSCRIPTION GUIDE',
'Version 2025.1  |  Indxx LLC',
'================================================================',
'',
'1. GETTING STARTED',
'   Step 1: Create a free account at platform.indxx.com',
'   Step 2: Preview sample data (L0 visible, L1/L2 locked)',
'   Step 3: Open Security Screener ‚Äî filter to your universe',
'   Step 4: Select companies ‚Üí Review pricing ‚Üí Activate trial',
'   Step 5: Access full L0/L1/L2/Revenue data in your dashboard',
'',
'2. FREE TRIAL',
'   Duration:  30 days',
'   Cost:      $0 ‚Äî no charge during trial',
'   Access:    Full data for all subscribed securities',
'   Cancel:    Anytime before trial ends ‚Äî no obligation',
'',
'3. PRICING MODEL',
'',
'   A. Per-Company Rate',
'      Region           Rate/company/month',
'      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ',
'      United States    $1.00',
'      Canada           $1.25',
'      India            $1.25',
'      UK, EU, Japan,',
'      Australia, etc.  $1.50',
'',
'   B. Regional Bundles (for 100+ company portfolios)',
'      Bundle           Coverage         Max Cos   Price/mo',
'      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ',
'      Americas         US & Canada      100        $80',
'      Europe           EU markets       100       $120',
'      Asia Pacific     APAC             100       $120',
'      Global 200       Worldwide        200       $280',
'      Global 500       Worldwide        500       $600',
'',
'      Bundles are automatically suggested during checkout',
'      when they offer savings over per-company pricing.',
'',
'4. SELECTING SECURITIES',
'   - Use the Security Screener (Filters panel on left)',
'   - Filter by L0 Sector ‚Üí L1 Theme ‚Üí L2 Sub-category',
'   - Apply Region, Revenue %, Classification, or MCap filters',
'   - Tick individual rows or use Select All',
'   - Pricing updates live in the subscription footer bar',
'',
'5. MANAGING YOUR SUBSCRIPTION',
'   Adding securities:  Immediate effect ‚Äî use "+" in dashboard',
'   Removing securities: Effective next billing cycle',
'   Billing changes:    Contact Indxx for enterprise modifications',
'',
'6. DATA EXPORT',
'   Format:  CSV or Excel (XLSX)',
'   Scope:   Per-year (2023/2024/2025) or All Years',
'   Content: Company ID, ISIN, Name, Country, Region, MCap,',
'            L0, L1 Code, L1 Name, L2 Code, L2 Name,',
'            Revenue %, Classification, Year',
'',
'   Multi-year Excel: separate worksheet per year + Summary tab',
'',
'7. PAYMENT & SECURITY',
'   Accepted:  Major credit cards (Visa, Mastercard, Amex)',
'   Billing:   Monthly, post-trial',
'   Security:  256-bit SSL ¬∑ PCI-DSS compliant ¬∑ Tokenized storage',
'',
'8. SUPPORT',
'   Self-service: Manage subscription from dashboard (‚öô Manage)',
'   Phone:        +1 (844) 55-INDXX  (Mon‚ÄìFri 9AM‚Äì6PM EST)',
'   Email:        info@indxx.com',
'   Web:          indxx.com/contact-us',
'',
'9. ENTERPRISE & API',
'   For 500+ companies, FTP delivery, API integration, or custom',
'   index licensing, contact enterprise@indxx.com.',
    ].join('\r\n');
  }
  triggerDownload(content,fname,'text/plain;charset=utf-8;');
  toast('üìÑ Guide downloaded: '+fname);
}

// ‚îÄ‚îÄ‚îÄ USE CASE TICKER ‚îÄ‚îÄ‚îÄ
var ucIdx=0;setInterval(function(){document.querySelectorAll('.uc-card').forEach(function(c){c.classList.remove('active');});ucIdx=(ucIdx+1)%3;var el=$$('UcCard'+ucIdx);if(el)el.classList.add('active');},3500);
</script>
</body>
</html>
